<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>入门 | conanan&#39;s blog</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/img/favicon.ico">
    <script data-ad-client="ca-pub-7828333725993554" async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <meta name="description" content="web前端技术博客,简洁至上,专注web前端学习与总结。JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github等技术文章。">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    <link rel="preload" href="/assets/css/0.styles.8d0d8388.css" as="style"><link rel="preload" href="/assets/js/app.b0138120.js" as="script"><link rel="preload" href="/assets/js/2.d80cefae.js" as="script"><link rel="preload" href="/assets/js/3.bb117ab4.js" as="script"><link rel="prefetch" href="/assets/js/10.dc3d9276.js"><link rel="prefetch" href="/assets/js/100.885513b6.js"><link rel="prefetch" href="/assets/js/101.1e7278f4.js"><link rel="prefetch" href="/assets/js/102.b6dcc8fb.js"><link rel="prefetch" href="/assets/js/103.528f8eed.js"><link rel="prefetch" href="/assets/js/104.40d208e6.js"><link rel="prefetch" href="/assets/js/105.c82648b8.js"><link rel="prefetch" href="/assets/js/106.dba6d0be.js"><link rel="prefetch" href="/assets/js/107.cedf6da7.js"><link rel="prefetch" href="/assets/js/108.2ef09b1b.js"><link rel="prefetch" href="/assets/js/11.363561ee.js"><link rel="prefetch" href="/assets/js/12.c08a1849.js"><link rel="prefetch" href="/assets/js/13.94fa3f25.js"><link rel="prefetch" href="/assets/js/14.07b06a30.js"><link rel="prefetch" href="/assets/js/15.f4f8f70e.js"><link rel="prefetch" href="/assets/js/16.6c45cbf1.js"><link rel="prefetch" href="/assets/js/17.ee5fea10.js"><link rel="prefetch" href="/assets/js/18.ec09ca38.js"><link rel="prefetch" href="/assets/js/19.3ad2963a.js"><link rel="prefetch" href="/assets/js/20.4c96a222.js"><link rel="prefetch" href="/assets/js/21.4f4232eb.js"><link rel="prefetch" href="/assets/js/22.146df052.js"><link rel="prefetch" href="/assets/js/23.038c69c1.js"><link rel="prefetch" href="/assets/js/24.75baf5ec.js"><link rel="prefetch" href="/assets/js/25.5ba0d14a.js"><link rel="prefetch" href="/assets/js/26.06fb0d23.js"><link rel="prefetch" href="/assets/js/27.26280f9a.js"><link rel="prefetch" href="/assets/js/28.051ce132.js"><link rel="prefetch" href="/assets/js/29.1b884f3e.js"><link rel="prefetch" href="/assets/js/30.00741406.js"><link rel="prefetch" href="/assets/js/31.b9f8a50c.js"><link rel="prefetch" href="/assets/js/32.712c7397.js"><link rel="prefetch" href="/assets/js/33.9ac50bd5.js"><link rel="prefetch" href="/assets/js/34.c993ce11.js"><link rel="prefetch" href="/assets/js/35.aa523051.js"><link rel="prefetch" href="/assets/js/36.867491f8.js"><link rel="prefetch" href="/assets/js/37.f086ba27.js"><link rel="prefetch" href="/assets/js/38.4e6305ba.js"><link rel="prefetch" href="/assets/js/39.ac90ba32.js"><link rel="prefetch" href="/assets/js/4.f3359245.js"><link rel="prefetch" href="/assets/js/40.9dbebe52.js"><link rel="prefetch" href="/assets/js/41.a863ef3c.js"><link rel="prefetch" href="/assets/js/42.a2a33607.js"><link rel="prefetch" href="/assets/js/43.10bf784c.js"><link rel="prefetch" href="/assets/js/44.9d15f1c1.js"><link rel="prefetch" href="/assets/js/45.e5be83aa.js"><link rel="prefetch" href="/assets/js/46.34d396d0.js"><link rel="prefetch" href="/assets/js/47.ef6ca13f.js"><link rel="prefetch" href="/assets/js/48.b2672a6c.js"><link rel="prefetch" href="/assets/js/49.c980a145.js"><link rel="prefetch" href="/assets/js/5.e3f8b7a1.js"><link rel="prefetch" href="/assets/js/50.955b2e87.js"><link rel="prefetch" href="/assets/js/51.1dc306e8.js"><link rel="prefetch" href="/assets/js/52.30175cf0.js"><link rel="prefetch" href="/assets/js/53.9f5e354e.js"><link rel="prefetch" href="/assets/js/54.a0ee32a4.js"><link rel="prefetch" href="/assets/js/55.791dfdc4.js"><link rel="prefetch" href="/assets/js/56.0aeae934.js"><link rel="prefetch" href="/assets/js/57.19d4027b.js"><link rel="prefetch" href="/assets/js/58.db0ccb73.js"><link rel="prefetch" href="/assets/js/59.094d8a04.js"><link rel="prefetch" href="/assets/js/6.eb5855a5.js"><link rel="prefetch" href="/assets/js/60.544a6e5e.js"><link rel="prefetch" href="/assets/js/61.81723a35.js"><link rel="prefetch" href="/assets/js/62.ae4f95a6.js"><link rel="prefetch" href="/assets/js/63.2e7c49a9.js"><link rel="prefetch" href="/assets/js/64.f6c40255.js"><link rel="prefetch" href="/assets/js/65.5630404b.js"><link rel="prefetch" href="/assets/js/66.13ec5f73.js"><link rel="prefetch" href="/assets/js/67.3639299c.js"><link rel="prefetch" href="/assets/js/68.1797535c.js"><link rel="prefetch" href="/assets/js/69.25b8e72f.js"><link rel="prefetch" href="/assets/js/7.a18b92bd.js"><link rel="prefetch" href="/assets/js/70.0821abbb.js"><link rel="prefetch" href="/assets/js/71.ece39714.js"><link rel="prefetch" href="/assets/js/72.dc07dbdd.js"><link rel="prefetch" href="/assets/js/73.f35507ce.js"><link rel="prefetch" href="/assets/js/74.577371a2.js"><link rel="prefetch" href="/assets/js/75.beea64bf.js"><link rel="prefetch" href="/assets/js/76.e494a310.js"><link rel="prefetch" href="/assets/js/77.e523ee43.js"><link rel="prefetch" href="/assets/js/78.4bbc5e55.js"><link rel="prefetch" href="/assets/js/79.fd3f0af4.js"><link rel="prefetch" href="/assets/js/8.8bc9769a.js"><link rel="prefetch" href="/assets/js/80.bbc8dad6.js"><link rel="prefetch" href="/assets/js/81.faf2752a.js"><link rel="prefetch" href="/assets/js/82.feac072c.js"><link rel="prefetch" href="/assets/js/83.130011e2.js"><link rel="prefetch" href="/assets/js/84.49d39985.js"><link rel="prefetch" href="/assets/js/85.d49c8c5a.js"><link rel="prefetch" href="/assets/js/86.d3364047.js"><link rel="prefetch" href="/assets/js/87.35f22232.js"><link rel="prefetch" href="/assets/js/88.4f8901e9.js"><link rel="prefetch" href="/assets/js/89.69284283.js"><link rel="prefetch" href="/assets/js/9.545ebf46.js"><link rel="prefetch" href="/assets/js/90.5cd68841.js"><link rel="prefetch" href="/assets/js/91.2731ffe5.js"><link rel="prefetch" href="/assets/js/92.ea2d1fdf.js"><link rel="prefetch" href="/assets/js/93.e487fb35.js"><link rel="prefetch" href="/assets/js/94.0b285ccf.js"><link rel="prefetch" href="/assets/js/95.56698d72.js"><link rel="prefetch" href="/assets/js/96.87718e62.js"><link rel="prefetch" href="/assets/js/97.e9f38e2c.js"><link rel="prefetch" href="/assets/js/98.2043d677.js"><link rel="prefetch" href="/assets/js/99.c7c3208b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8d0d8388.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/EB-logo.png" alt="conanan's blog" class="logo"> <span class="site-name can-hide">conanan's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Front End" class="dropdown-title"><a href="/pages/fa842a/" class="link-title">Front End</a> <span class="title" style="display:none;">Front End</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/fa842a/" class="nav-link">H5&amp;CSS3</a></li><li class="dropdown-item"><!----> <a href="/pages/84d48a/" class="nav-link">JS</a></li><li class="dropdown-item"><!----> <a href="/pages/b62d08/" class="nav-link">Node</a></li><li class="dropdown-item"><!----> <a href="/pages/6f1f8f/" aria-current="page" class="nav-link router-link-exact-active router-link-active">Webpack</a></li><li class="dropdown-item"><!----> <a href="/pages/b41819/" class="nav-link">Vue2</a></li><li class="dropdown-item"><!----> <a href="/pages/347f26/" class="nav-link">Vue3</a></li><li class="dropdown-item"><!----> <a href="/pages/00b1d8/" class="nav-link">微信小程序</a></li><li class="dropdown-item"><!----> <a href="/pages/6f1f8f/.html" class="nav-link">Andorid</a></li><li class="dropdown-item"><!----> <a href="/pages/6f1f8f/.html" class="nav-link">Flutter</a></li></ul></div></div><div class="nav-item"><a href="/pages/d80ad7/" class="nav-link">推荐</a></div> <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="http://img.crcz.com/allimg/202003/21/1584787461294466.jpg"> <div class="blogger-info"><h3>Conanan</h3> <span>前端笔记</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Front End" class="dropdown-title"><a href="/pages/fa842a/" class="link-title">Front End</a> <span class="title" style="display:none;">Front End</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/fa842a/" class="nav-link">H5&amp;CSS3</a></li><li class="dropdown-item"><!----> <a href="/pages/84d48a/" class="nav-link">JS</a></li><li class="dropdown-item"><!----> <a href="/pages/b62d08/" class="nav-link">Node</a></li><li class="dropdown-item"><!----> <a href="/pages/6f1f8f/" aria-current="page" class="nav-link router-link-exact-active router-link-active">Webpack</a></li><li class="dropdown-item"><!----> <a href="/pages/b41819/" class="nav-link">Vue2</a></li><li class="dropdown-item"><!----> <a href="/pages/347f26/" class="nav-link">Vue3</a></li><li class="dropdown-item"><!----> <a href="/pages/00b1d8/" class="nav-link">微信小程序</a></li><li class="dropdown-item"><!----> <a href="/pages/6f1f8f/.html" class="nav-link">Andorid</a></li><li class="dropdown-item"><!----> <a href="/pages/6f1f8f/.html" class="nav-link">Flutter</a></li></ul></div></div><div class="nav-item"><a href="/pages/d80ad7/" class="nav-link">推荐</a></div> <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Webpack5</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/6f1f8f/" aria-current="page" class="active sidebar-link">入门</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#介绍" class="sidebar-link">介绍</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#打包的东西" class="sidebar-link">打包的东西</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#node-和-npm-版本" class="sidebar-link">Node 和 NPM 版本</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#webpack-webpack-cli" class="sidebar-link">webpack &amp; webpack-cli</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#全局-webpack-打包" class="sidebar-link">全局 webpack 打包</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#局部-webpack-打包-🔥" class="sidebar-link">局部 webpack 打包 🔥</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#入口、出口文件配置-🔥" class="sidebar-link">入口、出口文件配置 🔥</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#webpack的依赖图" class="sidebar-link">Webpack的依赖图</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#打包-css" class="sidebar-link">打包 css</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#打包-less、scss、stylus" class="sidebar-link">打包 less、scss、stylus</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#postcss" class="sidebar-link">PostCSS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#安装-postcss、postcss-cli" class="sidebar-link">安装 postcss、postcss-cli</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#插件autoprefixer（可不用该插件）" class="sidebar-link">插件autoprefixer（可不用该插件）</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#postcss-loader" class="sidebar-link">postcss-loader</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#postcss-preset-env" class="sidebar-link">postcss-preset-env</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#postcss-完整配置" class="sidebar-link">postcss 完整配置</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#打包资源" class="sidebar-link">打包资源</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#file-loader" class="sidebar-link">file-loader</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#url-loader" class="sidebar-link">url-loader</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#字体文件" class="sidebar-link">字体文件</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#asset-module-type-🔥" class="sidebar-link">asset module type 🔥</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#plugin" class="sidebar-link">Plugin</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#cleanwebpackplugin" class="sidebar-link">CleanWebpackPlugin</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#htmlwebpackplugin" class="sidebar-link">HtmlWebpackPlugin</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#defineplugin" class="sidebar-link">DefinePlugin</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#copywebpackplugin" class="sidebar-link">CopyWebpackPlugin</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#mode配置" class="sidebar-link">Mode配置</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#babel" class="sidebar-link">Babel</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#介绍-2" class="sidebar-link">介绍</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#babel命令行使用" class="sidebar-link">Babel命令行使用</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#插件的使用" class="sidebar-link">插件的使用</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#babel的预设preset" class="sidebar-link">Babel的预设preset</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#babel的底层原理" class="sidebar-link">Babel的底层原理</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#babel编译器执行原理" class="sidebar-link">Babel编译器执行原理</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#babel-loader-🔥" class="sidebar-link">babel-loader 🔥</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#babel-preset-🔥" class="sidebar-link">babel-preset 🔥</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#babel的配置文件" class="sidebar-link">Babel的配置文件</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#vue-打包-🔥" class="sidebar-link">Vue 打包 🔥</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#问题" class="sidebar-link">问题</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#vue打包后不同版本解析" class="sidebar-link">Vue打包后不同版本解析</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#运行时-编译器-vs-仅运行时" class="sidebar-link">运行时+编译器 vs 仅运行时</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#vscode对sfc文件的支持" class="sidebar-link">VSCode对SFC文件的支持</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#app-vue-打包-🔥" class="sidebar-link">App.vue 打包 🔥</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#devserver-🔥" class="sidebar-link">devServer 🔥</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#需求" class="sidebar-link">需求</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#webpack-watch" class="sidebar-link">webpack watch</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#webpack-dev-server-🔥" class="sidebar-link">webpack-dev-server 🔥</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#hmr-模块热替换-🔥" class="sidebar-link">HMR 模块热替换 🔥</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#resolve-模块解析配置" class="sidebar-link">resolve 模块解析配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#介绍-4" class="sidebar-link">介绍</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#路径" class="sidebar-link">路径</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#文件？文件夹？" class="sidebar-link">文件？文件夹？</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#extensions和alias配置" class="sidebar-link">extensions和alias配置</a></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#配置-🔥" class="sidebar-link">配置 🔥</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/6f1f8f/#分离开发生产环境-🔥" class="sidebar-link">分离开发生产环境 🔥</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Webpack3</span> <span class="arrow right"></span></p> <!----></section></li></ul> <div class="sidebar-slot sidebar-slot-bottom"><!-- 正方形 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="3508773082"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div></aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-33863c7e><div class="articleInfo" data-v-33863c7e><ul class="breadcrumbs" data-v-33863c7e><li data-v-33863c7e><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-33863c7e></a></li> <li data-v-33863c7e><a href="/categories/?category=Webpack" title="分类" data-v-33863c7e>Webpack</a></li> <li data-v-33863c7e><a href="/categories/?category=Webpack5" title="分类" data-v-33863c7e>Webpack5</a></li> <!----></ul> <div class="info" data-v-33863c7e><div title="作者" class="author iconfont icon-touxiang" data-v-33863c7e><a href="https://github.com/apple54whn" target="_blank" title="作者" class="beLink" data-v-33863c7e>conanan</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-33863c7e><a href="javascript:;" data-v-33863c7e>2022-01-16</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">
          入门
        </h1> <div class="page-slot page-slot-top"><!-- 固定100% * 90px可显示，max-height:90px未见显示-->
     <ins class="adsbygoogle"
          style="display:inline-block;width:100%;max-height:90px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6625304284"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="theme-vdoing-content content__default"><h1 id="入门"><a href="#入门" class="header-anchor">#</a> 入门</h1> <h2 id="介绍"><a href="#介绍" class="header-anchor">#</a> 介绍</h2> <p>本质上，<strong>webpack</strong> 是一个用于现代 JavaScript 应用程序的 <em><strong>静态模块打包工具</strong></em>。当 webpack 处理应用程序时，它会在内部从一个或多个入口点构建一个 <a href="https://webpack.docschina.org/concepts/dependency-graph/" target="_blank" rel="noopener noreferrer">依赖图(dependency graph)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，然后将你项目中所需的每一个模块组合成一个或多个 <em>bundles</em>，它们均为静态资源，用于展示你的内容。</p> <ul><li>现代的modern：我们前端说过，正是因为现代前端开发面临各种各样的问题，才催生了webpack的出现和发展</li> <li>静态的static：这样表述的原因是我们最终可以将代码打包成最终的静态资源(部署到静态服务器)</li> <li>模块化module：webpack默认支持各种模块化开发，ES Module、CommonJS、AMD等</li> <li>打包bundler：webpack可以将帮助我们进行打包，所以它是一个打包工具</li></ul> <h2 id="打包的东西"><a href="#打包的东西" class="header-anchor">#</a> 打包的东西</h2> <p><strong>JavaScript的打包</strong>:</p> <ul><li>ES6转换成ES5的语法;</li> <li>TypeScript的处理，将其转换成JavaScript;</li></ul> <p><strong>Css的处理</strong>:</p> <ul><li>CSS文件模块的加载、提取;</li> <li>Less、Sass等预处理器的处理;</li></ul> <p><strong>资源文件img、font</strong>:</p> <ul><li>图片img文件的加载;</li> <li>字体font文件的加载;</li></ul> <p><strong>HTML资源的处理</strong></p> <ul><li>打包HTML资源文件;</li></ul> <p><strong>处理vue项目的SFC文件.vue文件;</strong></p> <h2 id="node-和-npm-版本"><a href="#node-和-npm-版本" class="header-anchor">#</a> Node 和 NPM 版本</h2> <p>目前使用的版本</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>v14.18.3
<span class="token number">6.14</span>.15
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="webpack-webpack-cli"><a href="#webpack-webpack-cli" class="header-anchor">#</a> webpack &amp; webpack-cli</h2> <p>webpack的安装目前分为两个：webpack、webpack-cli</p> <p>·那么它们是什么关系呢?</p> <ul><li>执行webpack命令，会执行node_modules下的.bin目录下的webpack;</li> <li>webpack在执行时是依赖webpack-cli的，如果没有安装就会报错;</li> <li>而webpack-cli中代码执行时，才是真正利用webpack进行编译和打包的过程;</li> <li>所以在安装webpack时，我们需要同时安装webpack-cli(第三方的脚手架事实上是没有使用webpack-cli的，而是类似于自己的vue-service-cli的东西)</li></ul> <p><img src="/assets/img/image-20220116170535399.ac2f1015.png" alt="image-20220116170535399"></p> <h2 id="全局-webpack-打包"><a href="#全局-webpack-打包" class="header-anchor">#</a> 全局 webpack 打包</h2> <p>安装</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> webpack webpack-cli –g <span class="token comment"># 全局安装 </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>创建如下文件</p> <p><img src="/assets/img/image-20220116172022406.81309bb5.png" alt="image-20220116172022406"></p> <p>/index.html</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 源js文件无法运行 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./src/index.js<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>/src/index.js</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> sum <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./js/math&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> priceFormat <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./js/format&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">priceFormat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>/src/js/format.js</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">priceFormat</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">&quot;¥99.88&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// CommonJS的导出</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  priceFormat
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>/src/js/math.js</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// ES Module</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> num1 <span class="token operator">+</span> num2<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>在项目<code>/</code>目录下执行<code>webpack</code>，会生成<code>/dist/main.js</code>，将html替换为</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 源js文件无法运行 --&gt;</span>
    <span class="token comment">&lt;!-- &lt;script src=&quot;./src/index.js&quot; type=&quot;module&quot;&gt;&lt;/script&gt; --&gt;</span>
    <span class="token comment">&lt;!-- 打包后的js文件可以访问 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./dist/main.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>就会运行成功！</p> <h2 id="局部-webpack-打包-🔥"><a href="#局部-webpack-打包-🔥" class="header-anchor">#</a> 局部 webpack 打包 🔥</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> init
<span class="token function">npm</span> <span class="token function">install</span> webpack webpack-cli -D
npx webpack
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>npx</code>意思是在<code>npm</code>安装的<code>node_modules</code>中的<code>.bin</code>目录下查找命令</p> <p>在package.json中创建scripts脚本，执行脚本打包即可</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>此时只写webpack，它会自动先在<code>node_modules</code>中的<code>.bin</code>目录下查找命令。执行如下命令即可打包</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm run build
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="入口、出口文件配置-🔥"><a href="#入口、出口文件配置-🔥" class="header-anchor">#</a> 入口、出口文件配置 🔥</h2> <p>当我们运行<code>webpack</code>时，webpack会查找当前目录下的 <code>src/index.js</code>作为入口，不存在则报错</p> <p><strong>可以通过配置来指定入口和出口</strong>：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code> npx webpack --entry ./src/main.js --output-path ./build
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>但是不推荐该方式，可以在项目根目录创建<code>wepack.config.js</code>文件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>

<span class="token comment">// Webpack在Node环境运行，Node使用的CommonJS，要改为ES6需要配置，比较麻烦</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 入口文件名</span>
  entry<span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// path必须是绝对路径！！！，__dirname代表当前文件（webpack.config.js）所在绝对路径</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./build'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token operator">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>在package.json中修改scripts脚本即可使用</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>若是创建的文件名不是默认的，而是如<code>conana.config.js</code>，则需要修改scripts脚本。不推荐！！！</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --config conana.config.js&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="webpack的依赖图"><a href="#webpack的依赖图" class="header-anchor">#</a> Webpack的依赖图</h2> <p><img src="/assets/img/image-20200614121215477.9c610ae7.png" alt="image-20200614121215477"></p> <ul><li>事实上webpack在处理应用程序时，它会根据命令或者配置文件找到入口文件</li> <li>从入口开始，会生成一个依赖关系图，这个依赖关系图会包含应用程序中所需的所有模块(比如.js文件、css文件、图片、字 体等)</li> <li>然后遍历图结构，打包一个个模块(根据文件的不同使用不同的loader来解析)</li> <li>注意，<strong>没有依赖到的不会打包</strong>！！！</li></ul> <h2 id="打包-css"><a href="#打包-css" class="header-anchor">#</a> 打包 css</h2> <p><code>css-loader</code> 是将 css 解析、装载；<code>style-loader</code> 是将解析、装载的 css 添加到 style 标签中。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> css-loader style-loader -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>配置webpack.config.js</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token comment">// loader: 'css-loader',</span>
        <span class="token comment">// use: ['css-loader'],</span>
        <span class="token comment">// 完整写法(倒序执行！！！)</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'style-loader'</span><span class="token punctuation">,</span> options<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span> options<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="打包-less、scss、stylus"><a href="#打包-less、scss、stylus" class="header-anchor">#</a> 打包 less、scss、stylus</h2> <p>这里以 less 为例。<code>less</code>会将less文件转换为css文件，安装后会有个<code>lessc</code>可执行文件；<code>less-loader</code>会批量将less文件转为css文件</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm install less less-loader -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>配置webpack.config.js</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>gmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'style-loader'</span><span class="token punctuation">,</span> options<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span> options<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'less-loader'</span><span class="token punctuation">,</span> options<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="postcss"><a href="#postcss" class="header-anchor">#</a> PostCSS</h2> <p>CSS的转换和适配，比如自动添加浏览器前缀、css样式的重置。实现这些功能，我们需要借助于PostCSS对应的插件</p> <p>如何使用PostCSS呢?主要就是两个步骤:</p> <ul><li>第一步:查找PostCSS在构建工具中的扩展，比如webpack中的postcss-loader;</li> <li>第二步:选择可以添加你需要的PostCSS相关的插件;</li></ul> <h3 id="安装-postcss、postcss-cli"><a href="#安装-postcss、postcss-cli" class="header-anchor">#</a> 安装 postcss、postcss-cli</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> postcss postcss-cli -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>postcss-cli可以直接在终端使用PostCSS</p> <p>我们编写一个需要添加前缀的csshttps://autoprefixer.github.io/，在该网站中查询一些添加css属性的样式;</p> <h3 id="插件autoprefixer（可不用该插件）"><a href="#插件autoprefixer（可不用该插件）" class="header-anchor">#</a> 插件autoprefixer（可不用该插件）</h3> <p>添加前缀，所以要安装autoprefixer</p> <div class="language- line-numbers-mode"><pre class="language-text"><code> npm install autoprefixer -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>直接使用使用postcss工具，并且制定使用autoprefixer</p> <div class="language- line-numbers-mode"><pre class="language-text"><code> npx postcss --use autoprefixer -o end.css ./src/css/style.css
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="postcss-loader"><a href="#postcss-loader" class="header-anchor">#</a> postcss-loader</h3> <p>真实开发中我们必然不会直接使用命令行工具来对css进行处理，而是可以借助于构建工具。在webpack中使用postcss就是使用postcss-loader来处理的</p> <div class="language- line-numbers-mode"><pre class="language-text"><code> npm install postcss-loader -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>修改加载css的loader。注意:因为postcss需要有对应的插件才会起效果，所以我们需要配置它的plugin</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
    loader<span class="token operator">:</span> <span class="token string">'postcss-loader'</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span>
            postcssOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
                plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'autoprefixer'</span><span class="token punctuation">)</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>当然，我们也可以将这些配置信息放到一个单独的文件中进行管理，在根目录下创建postcss.config.js</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'autoprefixer'</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="postcss-preset-env"><a href="#postcss-preset-env" class="header-anchor">#</a> postcss-preset-env</h3> <p>事实上，在配置postcss-loader时，我们配置插件并不需要使用autoprefixer，我们可以使用另外一个插件:postcss-preset-env</p> <ul><li>postcss-preset-env也是一个postcss的插件;</li> <li>它可以帮助我们将一些现代的CSS特性，转成大多数浏览器认识的CSS，并且会根据目标浏览器或者运行时环境 添加所需的polyfill</li> <li>也包括会自动帮助我们添加autoprefixer(所以相当于已经内置了autoprefixer)</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code> npm install postcss-preset-env -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>之后，我们直接修改掉之前的autoprefixer即可</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'postcss-preset-env'</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>注意:我们在使用某些postcss插件时，也可以直接传入字符串</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">'postcss-preset-env'</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="postcss-完整配置"><a href="#postcss-完整配置" class="header-anchor">#</a> postcss 完整配置</h3> <p>webpack.config.js</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'style-loader'</span><span class="token punctuation">,</span> options<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span> options<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">'postcss-loader'</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'style-loader'</span><span class="token punctuation">,</span> options<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span> options<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">'postcss-loader'</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'less-loader'</span><span class="token punctuation">,</span> options<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>postcss.config.js</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'postcss-preset-env'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="打包资源"><a href="#打包资源" class="header-anchor">#</a> 打包资源</h2> <p>为了演示我们项目中可以加载图片，我们需要在项目中使用图片，比较常见的使用图片的方式是两种</p> <ul><li>img元素，设置src属性;</li> <li>其他元素(比如div)，设置background-image的css属性;</li></ul> <h3 id="file-loader"><a href="#file-loader" class="header-anchor">#</a> file-loader</h3> <p>要处理jpg、png等格式的图片，我们也需要有对应的loader:<strong>file-loader</strong></p> <p>file-loader的作用就是帮助我们处理<code>import/require()</code>方式引入的一个文件资源，并且会将它放到我们输出的文件夹中;</p> <p>当然我们待会儿可以学习如何修改它的名字和所在文件夹</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm install file-loader -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>有时候我们处理后的文件名称按照一定的规则进行显示，比如保留原来的文件名、扩展名，同时为了防止重复，包含一个hash值等;</p> <p>这个时候我们可以使用PlaceHolders来完成，webpack给我们提供了大量的PlaceHolders来显示不同的内容: https://webpack.js.org/loaders/file-loader/#placeholders。我们可以在文档中查阅自己需要的placeholder;</p> <p>我们这里介绍几个最常用的placeholder:</p> <ul><li><code>[ext]</code>: 处理文件的扩展名;</li> <li><code>[name]</code>:处理文件的名称;</li> <li><code>[hash]</code>:文件的内容，使用MD4的散列函数处理，生成的一个128位的hash值(32个十六进制);</li> <li><code>[contentHash]</code>:在file-loader中和[hash]结果是一致的(在webpack的一些其他地方不一样，后面会讲到);</li> <li><code>[hash:&lt;length&gt;]</code>:截图hash的长度，默认32个字符太长了;</li> <li><code>[path]</code>:文件相对于webpack配置文件的路径;</li></ul> <h4 id="完整配置"><a href="#完整配置" class="header-anchor">#</a> 完整配置</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(jpe?g|png|gif|svg)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token comment">// file-loader 和 url-loader 根据需要选择一个</span>
          loader<span class="token operator">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
          <span class="token comment">// loader: 'url-loader',</span>
          options<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// outputPath: &quot;img&quot;,</span>
            name<span class="token operator">:</span> <span class="token string">'img/[name]_[hash:6].[ext]'</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="url-loader"><a href="#url-loader" class="header-anchor">#</a> url-loader</h3> <p><strong>url-loader和file-loader</strong>的工作方式是相似的，但是可以将较小的文件，转成base64的URI</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code> <span class="token function">npm</span> <span class="token function">install</span> url-loader -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>dist文件夹中，我们会看不到图片文件:</p> <ul><li>这是因为我的两张图片的大小分别是38kb和295kb;</li> <li>默认情况下url-loader会将所有的图片文件转成base64编码</li></ul> <p>但是开发中我们往往是小的图片需要转换，但是大的图片直接使用图片即可</p> <ul><li>这是因为小的图片转换base64之后可以和页面一起被请求，减少不必要的请求过程</li> <li>而大的图片也进行转换，反而会影响页面的请求速度;</li></ul> <p>url-loader有一个options属性limit，可以用于设置转换的限制;</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(jpe?g|png|gif|svg)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token comment">// file-loader 和 url-loader 根据需要选择一个</span>
          <span class="token comment">// loader: 'file-loader',</span>
          loader<span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
          options<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// outputPath: &quot;img&quot;,</span>
            name<span class="token operator">:</span> <span class="token string">'img/[name]_[hash:6].[ext]'</span><span class="token punctuation">,</span>
            limit<span class="token operator">:</span> <span class="token number">100</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="字体文件"><a href="#字体文件" class="header-anchor">#</a> 字体文件</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(eot|ttf|woff2?)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">{</span>
          loader<span class="token operator">:</span> <span class="token string">&quot;file-loader&quot;</span><span class="token punctuation">,</span>
          options<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// outputPath: &quot;font&quot;,</span>
            name<span class="token operator">:</span> <span class="token string">&quot;font/[name]_[hash:6].[ext]&quot;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="asset-module-type-🔥"><a href="#asset-module-type-🔥" class="header-anchor">#</a> asset module type 🔥</h3> <p><strong>我们当前使用的webpack版本是webpack5:</strong></p> <ul><li>在webpack5之前，加载这些资源我们需要使用一些loader，比如raw-loader 、url-loader、file-loader;</li> <li>在webpack5开始，我们可以直接使用资源模块类型(asset module type)，来替代上面的这些loader;</li></ul> <p><strong>资源模块类型(asset module type)</strong>，通过添加 4 种新的模块类型，来替换所有这些 loader:</p> <ul><li><strong>asset/resource</strong> 发送一个单独的文件并导出 URL。之前通过使用 file-loader 实现;</li> <li><strong>asset/inline</strong> 导出一个资源的 data URI。之前通过使用 url-loader 实现;</li> <li><strong>asset/source</strong> 导出资源的源代码。之前通过使用 raw-loader 实现;</li> <li><strong>asset</strong> 在导出一个 data URI 和发送一个单独的文件之间自动选择。之前通过使用 url-loader，并且配置资源体 积限制实现;</li></ul> <h4 id="完整配置-2"><a href="#完整配置-2" class="header-anchor">#</a> 完整配置</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack5的asset module type替换file-loader 和 url-loader等</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(jpe?g|png|gif|svg)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        type<span class="token operator">:</span> <span class="token string">'asset'</span><span class="token punctuation">,</span>
        generator<span class="token operator">:</span> <span class="token punctuation">{</span>
          filename<span class="token operator">:</span> <span class="token string">'img/[name]_[hash:6][ext]'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        parser<span class="token operator">:</span> <span class="token punctuation">{</span>
          dataUrlCondition<span class="token operator">:</span> <span class="token punctuation">{</span>
            maxSize<span class="token operator">:</span> <span class="token number">100</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(eot|ttf|woff2?)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        type<span class="token operator">:</span> <span class="token string">'asset/resource'</span><span class="token punctuation">,</span>
        generator<span class="token operator">:</span> <span class="token punctuation">{</span>
          filename<span class="token operator">:</span> <span class="token string">'font/[name]_[hash:6][ext]'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>效果和上述url-loader、file-loader一样！！！</p> <h2 id="plugin"><a href="#plugin" class="header-anchor">#</a> Plugin</h2> <p><strong>Webpack的另一个核心是Plugin，官方有这样一段对Plugin的描述:</strong></p> <p>While loaders are used to transform certain types of modules, plugins can be leveraged to perform a wider range of tasks like bundle optimization, asset management and injection of environment variables.</p> <p>上面表达的含义翻译过来就是:</p> <ul><li>Loader是用于特定的<strong>模块类型进行转换</strong>;</li> <li>Plugin可以用于执行更加广泛的任务，比如<strong>打包优化、资源管理、环境变量注入</strong>等;</li></ul> <p><img src="/assets/img/image-20220116224107667.fdb593ac.png" alt="image-20220116224107667"></p> <h3 id="cleanwebpackplugin"><a href="#cleanwebpackplugin" class="header-anchor">#</a> CleanWebpackPlugin</h3> <p>前面我们演示的过程中，每次修改了一些配置，重新打包时，都需要手动删除dist文件夹。我们可以借助于一个插件来帮助我们完成，这个插件就是CleanWebpackPlugin</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code> <span class="token function">npm</span> <span class="token function">install</span> clean-webpack-plugin -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>配置</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> CleanWebpackPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;clean-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="htmlwebpackplugin"><a href="#htmlwebpackplugin" class="header-anchor">#</a> HtmlWebpackPlugin</h3> <p>另外还有一个<strong>不太规范</strong>的地方:</p> <ul><li>我们的HTML文件是编写在根目录下的，而最终打包的dist文件夹中是没有index.html文件的。</li> <li>在进行项目部署的时，必然也是需要有对应的入口文件index.html;</li> <li>所以我们也需要对index.html进行打包处理;</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code> <span class="token function">npm</span> <span class="token function">install</span> html-webpack-plugin -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>配置（可以在public中使用自定义模板）</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;html-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      	template<span class="token operator">:</span> <span class="token string">&quot;./public/index.html&quot;</span><span class="token punctuation">,</span>
      	title<span class="token operator">:</span> <span class="token string">&quot;哈哈哈哈&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="defineplugin"><a href="#defineplugin" class="header-anchor">#</a> DefinePlugin</h3> <p>这是因为在编译template模块时，有一个BASE_URL<code>&lt;link rel=&quot;icon&quot; href=&quot;&lt;%= BASE_URL %&gt;favicon.ico&quot;&gt;</code>但是我们并没有设置过这个常量值，所以会出现没有定义的错误，可以使用DefinePlugin插件;</p> <p>DefinePlugin允许在编译时创建配置的全局常量，是一个webpack内置的插件(不需要单独安装)</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> DefinePlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      	<span class="token constant">BASE_URL</span><span class="token operator">:</span> <span class="token string">&quot;'./'&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="copywebpackplugin"><a href="#copywebpackplugin" class="header-anchor">#</a> CopyWebpackPlugin</h3> <p>在vue的打包过程中，如果我们将一些文件放到public的目录下，那么这个目录会被复制到dist文件夹中。 这个复制的功能，我们可以使用CopyWebpackPlugin来完成;</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code> <span class="token function">npm</span> <span class="token function">install</span> copy-webpack-plugin -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>配置CopyWebpackPlugin：</p> <ul><li>复制的规则在patterns中设置;</li> <li>**from:**设置从哪一个源中开始复制;</li> <li>**to:**复制到的位置，可以省略，会默认复制到打包的目录下;</li> <li>**globOptions:**设置一些额外的选项，其中可以编写需要忽略的文件:
<ul><li>.DS_Store:mac目录下回自动生成的一个文件;</li> <li>index.html:也不需要复制，因为我们已经通过HtmlWebpackPlugin完成了index.html的生成;</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> CopyWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'copy-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">CopyWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&quot;public&quot;</span><span class="token punctuation">,</span>
          to<span class="token operator">:</span> <span class="token string">&quot;./&quot;</span><span class="token punctuation">,</span>
          globOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
            ignore<span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token string">&quot;**/index.html&quot;</span>
            <span class="token punctuation">]</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="mode配置"><a href="#mode配置" class="header-anchor">#</a> Mode配置</h2> <p>Mode配置选项，可以告知webpack使用响应模式的内置优化:</p> <ul><li>默认值是production(什么都不设置的情况下);</li> <li>可选值有:'none' | 'development' | 'production'</li></ul> <p><img src="/assets/img/image-20220116225529127.5313c56b.png" alt="image-20220116225529127"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token comment">// 设置模式</span>
  <span class="token comment">// development 开发阶段, 会设置development</span>
  <span class="token comment">// production 准备打包上线的时候, 设置production</span>
  mode<span class="token operator">:</span> <span class="token string">&quot;development&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// 设置source-map, 建立js映射文件, 方便调试代码和错误</span>
  devtool<span class="token operator">:</span> <span class="token string">&quot;source-map&quot;</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="babel"><a href="#babel" class="header-anchor">#</a> Babel</h2> <h3 id="介绍-2"><a href="#介绍-2" class="header-anchor">#</a> 介绍</h3> <p>开发中，我们想要使用ES6+的语法，想要使用TypeScript，开发React项目，它们都是离不开Babel的。所以，学习Babel对于我们理解代码从编写到线上的转变过程至关重要</p> <p>Babel是一个<strong>工具链</strong>，主要用于旧浏览器或者环境中将ECMAScript 2015+代码转换为向后兼容版本的 JavaScript。如<strong>语法转换</strong>、<strong>源代码转换</strong>等</p> <h3 id="babel命令行使用"><a href="#babel命令行使用" class="header-anchor">#</a> Babel命令行使用</h3> <p>babel本身可以作为<strong>一个独立的工具</strong>(和postcss一样)，不和webpack等构建工具配置来单独使用</p> <p>如果我们希望在命令行尝试使用babel，需要安装如下库</p> <ul><li>@babel/core:babel的核心代码，必须安装;</li> <li>@babel/cli:可以让我们在命令行使用babel;</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code> <span class="token function">npm</span> <span class="token function">install</span> @babel/cli @babel/core -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用babel来处理我们的源代码:</p> <ul><li>src:是源文件的目录;</li> <li>--out-dir:指定要输出的文件夹dist;</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code> npx babel src --out-dir dist
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="插件的使用"><a href="#插件的使用" class="header-anchor">#</a> 插件的使用</h3> <p>比如我们需要转换箭头函数，那么我们就可以使用<strong>箭头函数转换相关的插件</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code> <span class="token function">npm</span> <span class="token function">install</span> @babel/plugin-transform-arrow-functions -D
 npx babel src --out-dir dist --plugins<span class="token operator">=</span>@babel/plugin-transform-arrow-functions
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>查看转换后的结果:我们会发现 const 并没有转成 var</p> <ul><li>这是因为 plugin-transform-arrow-functions，并没有提供这样的功能;</li> <li>我们需要使用 plugin-transform-block-scoping 来完成这样的功能;</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> @babel/plugin-transform-block-scoping -D
npx babel src --out-dir dist --plugins<span class="token operator">=</span>@babel/plugin-transform-block-scoping ,@babel/plugin-transform-arrow-functions
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="babel的预设preset"><a href="#babel的预设preset" class="header-anchor">#</a> Babel的预设preset</h3> <p>但是如果要转换的内容过多，一个个设置是比较麻烦的，我们可以使用预设(preset)</p> <p>安装@babel/preset-env预设</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code> <span class="token function">npm</span> <span class="token function">install</span> @babel/preset-env -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>执行如下命令</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code> npx babel src --out-dir dist --presets<span class="token operator">=</span>@babel/preset-env
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="babel的底层原理"><a href="#babel的底层原理" class="header-anchor">#</a> Babel的底层原理</h3> <p>babel是如何做到将我们的**一段代码(ES6、TypeScript、React)<strong>转成</strong>另外一段代码(ES5)**的呢?</p> <ul><li>从一种源代码(原生语言)转换成另一种源代码(目标语言)，这是什么的工作呢?</li> <li>就是<strong>编译器</strong>，事实上我们可以将babel看成就是一个编译器。</li> <li>Babel编译器的作用就是将我们的源代码，转换成浏览器可以直接识别的另外一段源代码;</li></ul> <p><strong>Babel也拥有编译器的工作流程:</strong></p> <ul><li>解析阶段(Parsing)</li> <li>转换阶段(Transformation)</li> <li>生成阶段(Code Generation)</li></ul> <p>https://github.com/jamiebuilds/the-super-tiny-compiler</p> <h3 id="babel编译器执行原理"><a href="#babel编译器执行原理" class="header-anchor">#</a> Babel编译器执行原理</h3> <p>Babel的执行阶段</p> <p><img src="/assets/img/image-20220117003325292.3beba65f.png" alt="image-20220117003325292"></p> <p>当然，这只是一个简化版的编译器工具流程，在每个阶段又会有自己具体的工作</p> <p><img src="/assets/img/image-20220117003340937.afd5341c.png" alt="image-20220117003340937"></p> <h3 id="babel-loader-🔥"><a href="#babel-loader-🔥" class="header-anchor">#</a> babel-loader 🔥</h3> <p>在实际开发中，我们通常会在构建工具中通过配置babel来对其进行使用的，比如在webpack中。那么我们就需要去安装相关的依赖，如果之前已经安装了@babel/core，那么这里不需要再次安装</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code> <span class="token function">npm</span> <span class="token function">install</span> babel-loader @babel/core -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>我们可以设置一个规则，在加载js文件时，使用我们的babel</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
    test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    loader<span class="token operator">:</span> <span class="token string">&quot;babel-loader&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>我们必须指定使用的插件才会生效</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
    test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">&quot;babel-loader&quot;</span><span class="token punctuation">,</span>
                options<span class="token operator">:</span> <span class="token punctuation">{</span>
                    plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
                       <span class="token string">&quot;@babel/plugin-transform-arrow-functions&quot;</span><span class="token punctuation">,</span>
                       <span class="token string">&quot;@babel/plugin-transform-block-scoping&quot;</span><span class="token punctuation">,</span>
                    <span class="token punctuation">]</span>
                    
                <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="babel-preset-🔥"><a href="#babel-preset-🔥" class="header-anchor">#</a> babel-preset 🔥</h3> <p>如果我们一个个去安装使用插件，那么需要手动来管理大量的babel插件，我们可以直接给webpack提供一个 preset，webpack会根据我们的预设来加载对应的插件列表，并且将其传递给babel。</p> <p>比如常见的预设有三个:</p> <ul><li><p>env</p></li> <li><p>react</p></li> <li><p>TypeScript</p></li></ul> <p>安装preset-env</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code> <span class="token function">npm</span> <span class="token function">install</span> @babel/preset-env
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>配置</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
    test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">&quot;babel-loader&quot;</span><span class="token punctuation">,</span>
                options<span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token comment">// plugins: [</span>
                    <span class="token comment">//   &quot;@babel/plugin-transform-arrow-functions&quot;,</span>
                    <span class="token comment">//   &quot;@babel/plugin-transform-block-scoping&quot;,</span>
                    <span class="token comment">// ]</span>
                    presets<span class="token operator">:</span> <span class="token punctuation">[</span>
                        <span class="token string">&quot;@babel/preset-env&quot;</span>
                    <span class="token punctuation">]</span>
                <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="babel的配置文件"><a href="#babel的配置文件" class="header-anchor">#</a> Babel的配置文件</h3> <p>像之前一样，我们可以将babel的配置信息放到一个独立的文件中，babel给我们提供了两种配置文件的编写:</p> <ul><li>babel.config.json(或者.js，.cjs，.mjs)文件;</li> <li>.babelrc.json(或者.babelrc，.js，.cjs，.mjs)文件;</li></ul> <p>它们两个有什么区别呢?目前很多的项目都采用了多包管理的方式(babel本身、element-plus、umi等);</p> <ul><li>.babelrc.json:早期使用较多的配置方式，但是对于配置Monorepos项目是比较麻烦的;</li> <li><strong>babel.config.json</strong>(babel7):可以直接作用于Monorepos项目的子包，更加<strong>推荐</strong>;</li></ul> <p>babel.config.js</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  presets<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;@babel/preset-env&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>webpack.config.js可以精简为</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
    test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    loader<span class="token operator">:</span> <span class="token string">&quot;babel-loader&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="vue-打包-🔥"><a href="#vue-打包-🔥" class="header-anchor">#</a> Vue 打包 🔥</h2> <h3 id="问题"><a href="#问题" class="header-anchor">#</a> 问题</h3> <p>安装vue</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> vue
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>修改element.js</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>

<span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    template<span class="token operator">:</span> <span class="token string">'#my-app'</span><span class="token punctuation">,</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            title<span class="token operator">:</span> <span class="token string">'标题'</span><span class="token punctuation">,</span>
            content<span class="token operator">:</span> <span class="token string">'内容'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>由于vue是js文件，所以打包是正常的。但是界面没有效果，且报如下警告：</p> <p><img src="/assets/img/image-20220117005531933.bff0ce9b.png" alt="image-20220117005531933"></p> <p>修改为如下的即可</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue/dist/vue.esm-bundler'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>但是使用SFC时无需改为<code>vue.esm-bundler</code></p> <h3 id="vue打包后不同版本解析"><a href="#vue打包后不同版本解析" class="header-anchor">#</a> Vue打包后不同版本解析</h3> <ul><li><p><strong>vue(.runtime).global(.prod).js</strong>:</p> <ul><li>p通过浏览器中的 <code>&lt;script src=&quot;...&quot;&gt;</code> 直接使用;</li> <li>我们之前通过CDN引入和下载的Vue版本就是这个版本;</li> <li>会暴露一个全局的Vue来使用;</li></ul></li> <li><p><strong>vue(.runtime).esm-browser(.prod).js</strong>:</p> <ul><li>用于通过原生 ES 模块导入使用 (在浏览器中通过 <code>&lt;script type=&quot;module&quot;&gt;</code> 来使用)。</li></ul></li> <li><p><strong>vue(.runtime).esm-bundler.js</strong>:</p></li> <li><p>用于 webpack，rollup 和 parcel 等构建工具;</p></li> <li><p><strong>构建工具中默认</strong>是<strong>vue.runtime.esm-bundler.js</strong>;</p></li> <li><p>如果我们需要解析模板template，那么需要<strong>手动指定vue.esm-bundler.js</strong>;</p></li> <li><p>**vue.cjs(.prod).js:</p> <ul><li>服务器端渲染使用;</li> <li>通过require()在Node.js中使用;</li></ul></li></ul> <h3 id="运行时-编译器-vs-仅运行时"><a href="#运行时-编译器-vs-仅运行时" class="header-anchor">#</a> 运行时+编译器 vs 仅运行时</h3> <p>在Vue的开发过程中我们有<strong>三种方式</strong>来编写DOM元素:</p> <ul><li>方式一:template模板的方式(之前经常使用的方式);</li> <li>方式二:render函数的方式，使用h函数来编写渲染的内容;</li> <li>方式三:通过.vue文件中的template来编写模板;</li></ul> <p><strong>它们的模板分别是如何处理的呢?</strong></p> <ul><li>方式二中的h函数可以直接返回一个<strong>虚拟节点</strong>，也就是<strong>Vnode节点</strong>;</li> <li>方式一和方式三的template都需要有特定的代码来对其进行解析:
<ul><li>方式三.vue文件中的template可以通过在vue-loader对其进行编译和处理;</li> <li>方式一中的template我们必须要通过源码中一部分代码来进行编译;</li></ul></li></ul> <p>所以，Vue在让我们选择版本的时候分为 <strong>运行时+编译器</strong> vs **仅运行时</p> <ul><li>运行时+编译器包含了对template模板的编译代码，更加完整，但是也更大一些;</li> <li>仅运行时没有包含对template版本的编译代码，相对更小一些;</li></ul> <h3 id="vscode对sfc文件的支持"><a href="#vscode对sfc文件的支持" class="header-anchor">#</a> VSCode对SFC文件的支持</h3> <p>真实开发中多数情况下我们都是使用SFC(<strong>single-file components</strong>)，即单文件组件方式</p> <p>VSCode对SFC的支持:</p> <ul><li>插件一:<strong>Vetur</strong>，从Vue2开发就一直在使用的VSCode支持Vue的插件;</li> <li>插件二:<strong>Volar</strong>，官方推荐的插件(后续会基于Volar开发官方的VSCode插件);</li></ul> <h3 id="app-vue-打包-🔥"><a href="#app-vue-打包-🔥" class="header-anchor">#</a> App.vue 打包 🔥</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> vue-loader -D
<span class="token function">npm</span> <span class="token function">install</span> @vue/compiler-sfc -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>webpack.config.js</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
    test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.vue$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    loader<span class="token operator">:</span> <span class="token string">&quot;vue-loader&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>还配置对应的Vue插件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> VueLoaderPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'vue-loader/dist/index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">VueLoaderPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="devserver-🔥"><a href="#devserver-🔥" class="header-anchor">#</a> devServer 🔥</h2> <h3 id="需求"><a href="#需求" class="header-anchor">#</a> 需求</h3> <p>目前我们开发的代码，为了运行需要有两个操作</p> <ul><li><code>npm run build</code>编译相关代码</li> <li>通过live server或者直接通过浏览器，打开index.html代码，查看效果</li></ul> <p>这个过程经常操作会影响我们的开发效率，我们希望可以做到，当<strong>文件发生变化</strong>时，可以<strong>自动的完成编译和展示</strong>。为了完成自动编译，webpack提供了几种可选的方式：</p> <ul><li>webpack watch mode</li> <li>webpack-dev-server（常用）</li> <li>webpack-dev-middleware</li></ul> <h3 id="webpack-watch"><a href="#webpack-watch" class="header-anchor">#</a> webpack watch</h3> <p>webpack给我们提供了<strong>watch模式</strong>。在该模式下，webpack依赖图中的所有文件，只要有一个<strong>发生了更新</strong>，那么<strong>代码将被重新编译</strong>，我们不需要手动去运行 npm run build指令了</p> <p><strong>开启watch两种方式</strong></p> <ul><li><p>在导出的配置中，添加 <code>watch: true</code>。修改webpack.config.js</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// mode: 'xxx',</span>
watch<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>在启动webpack的命令中，添加 <code>--watch</code>的标识。修改package.json</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token string">&quot;script&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
   <span class="token string">&quot;watch&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --watch&quot;</span> 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul> <h3 id="webpack-dev-server-🔥"><a href="#webpack-dev-server-🔥" class="header-anchor">#</a> webpack-dev-server 🔥</h3> <p>上面的方式<strong>可以监听到文件的变化</strong>，但是事实上它本身是<strong>没有自动刷新浏览器的功能</strong>的。当然通过在VSCode中使用live-server来完成这样的功能。在不使用live-server的情况下，可以具备live reloading(实时重新加载)的功能</p> <h4 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h4> <ul><li><p><strong>安装webpack-dev-server</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code> <span class="token function">npm</span> <span class="token function">install</span> webpack-dev-server -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>修改package.json</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
   <span class="token property">&quot;serve&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack serve&quot;</span> 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>执行<code>npm run serve</code>即可完成</p></li></ul> <h4 id="contentbase-配置-🔥"><a href="#contentbase-配置-🔥" class="header-anchor">#</a> contentBase 配置 🔥</h4> <p><strong>修改webpack.config.js配置文件</strong>，告知 devServer，从什么位置查找文件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    contentBase<span class="token operator">:</span> <span class="token string">&quot;./public&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>这里的文件指的是额外的，如favicon.ico 或者其他 x.mp4 之类的资源，一般放在 <code>/public</code>中</p> <ul><li><strong>打包</strong>阶段：<strong>使用的是<code>copyWepackPlugin</code>插件</strong>，每次打包将<code>/public</code>中文件复制到<code>/build</code>中</li> <li><strong>开发</strong>阶段，复制文件比较耗费性能，并且 webpack-dev-server 使用的是内存方式，不适合复制这些静态资源。所以在找不到资源时，就会去<strong>配置的<code>contentBase</code>中查找</strong></li></ul> <h4 id="host配置-🔥"><a href="#host配置-🔥" class="header-anchor">#</a> host配置 🔥</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    host<span class="token operator">:</span> <span class="token string">&quot;0.0.0.0&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>host设置主机地址</strong>:</p> <ul><li>默认值是<code>localhost</code>;</li> <li>如果希望<strong>其他地方也可以访问</strong>，可以设置为<code>0.0.0.0</code>;</li></ul> <p><strong>localhost 和 0.0.0.0 的区别</strong></p> <ul><li>localhost:本质上是一个域名，通常情况下会被解析成127.0.0.1;</li> <li>127.0.0.1:回环地址(Loop Back Address)，表达的意思其实是我们主机自己发出去的包，直接被自己接收;
<ul><li>正常的数据库包经常 应用层 - 传输层 - 网络层 - 数据链路层 - 物理层 ;</li> <li>而回环地址，是在网络层直接就被获取到了，是不会经常数据链路层和物理层的; ü 比如我们监听 127.0.0.1时，在同一个网段下的主机中，通过ip地址是不能访问的</li></ul></li></ul> <h4 id="port、open、compress-配置-🔥"><a href="#port、open、compress-配置-🔥" class="header-anchor">#</a> port、open、compress 配置 🔥</h4> <ul><li><p><strong>port设置监听的端口，默认情况下是8080</strong></p></li> <li><p><strong>open是否打开浏览器</strong></p> <p>默认值是false，设置为true会打开浏览器; 也可以设置为类似于 Google Chrome等值</p></li> <li><p><strong>compress是否为静态文件开启gzip compression</strong></p> <p>默认值是false，可以设置为true。一般对js进行压缩！</p></li></ul> <h4 id="proxy-配置-🔥"><a href="#proxy-配置-🔥" class="header-anchor">#</a> proxy 配置 🔥</h4> <p>首先要明确，跨域是浏览器的安全策略！服务器之间访问没有跨域问题。proxy就是根据这个原理来解决开发阶段跨域问题！</p> <p>如，8000访问8888的api</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
	proxy<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;/api&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        target<span class="token operator">:</span> <span class="token string">&quot;http://localhost:8888&quot;</span><span class="token punctuation">,</span>
        pathRewrite<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string">&quot;^/api&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        secure<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        changeOrigin<span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>proxy是我们开发（生产中不 用这个！）中非常常用的一个配置选项，它的目的设置代理来解决跨域访问的问题:</strong></p> <ul><li><p>比如我们的一个api请求是 http://localhost:8888，但是本地启动服务器的域名是 http://localhost:8000，这 个时候发送网络请求就会出现跨域的问题;</p></li> <li><p>那么我们可以将请求先发送到一个代理服务器，代理服务器和API服务器没有跨域的问题，就可以解决我们的跨域问题了;</p></li></ul> <p><strong>进行如下的设置</strong></p> <ul><li>**target:**表示的是代理到的目标地址，比如 <code>/api-hy/moment</code>会被代理到 http://localhost:8888/api-hy/moment;</li> <li>**pathRewrite:**默认情况下，我们的 /api-hy 也会被写入到URL中，如果希望删除，可以使用pathRewrite;</li> <li>**secure:**默认情况下不接收转发到https的服务器上，如果希望支持，可以设置为false; 开发阶段可以置为false</li> <li>**changeOrigin:**它表示是否更新代理后请求的headers中host地址（将target配置写入header）。</li></ul> <h4 id="historyapifallback-配置"><a href="#historyapifallback-配置" class="header-anchor">#</a> historyApiFallback 配置</h4> <p>和路由有关！</p> <p><strong>historyApiFallback</strong>是开发中一个非常常见的属性，它主要的作用是解决SPA页面在路由跳转之后，进行页面刷新时，返回404的错误。</p> <p>boolean值：</p> <ul><li>默认是false</li> <li>如果设置为true，那么在刷新时，返回404错误时，会自动返回 index.html 的内容</li></ul> <p>object类型的值，可以配置rewrites属性(了解)：</p> <ul><li>可以配置from来匹配路径，决定要跳转到哪一个页面</li></ul> <p>事实上devServer中实现historyApiFallback功能是通过<a href="https://github.com/bripkens/connect-history-api-fallback" target="_blank" rel="noopener noreferrer">connect-history-api-fallback库<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>的</p> <h3 id="hmr-模块热替换-🔥"><a href="#hmr-模块热替换-🔥" class="header-anchor">#</a> HMR 模块热替换 🔥</h3> <h4 id="介绍-3"><a href="#介绍-3" class="header-anchor">#</a> 介绍</h4> <p>HMR的全称是Hot Module Replacement，翻译为模块热替换。指在 <strong>应用程序运行过程中</strong>，<strong>替换、添加、删除</strong>模块，而<strong>无需重新刷新</strong>整个页面。</p> <p>HMR通过如下几种方式，来提高开发的速度：</p> <ul><li><strong>不重新加载整个页面</strong>，这样可以<strong>保留</strong>某些应用程序的<strong>状态</strong>不丢失。如<strong>计数器</strong></li> <li><strong>只更新需要变化的内容</strong>，节省开发的时间</li> <li>修改了css、js源代码，会立即在浏览器更新，相当于直接在浏览器的devtools中直接修改样式</li></ul> <p>默认情况下，<strong>webpack-dev-server已经支持HMR</strong>，我们只<strong>需要开启</strong>即可。在不开启HMR的情况下，当我们修改了源代码之后，整个页面会自动刷新，使用的是live reloading</p> <h4 id="hot-配置-🔥"><a href="#hot-配置-🔥" class="header-anchor">#</a> hot 配置 🔥</h4> <p><strong>修改webpack.config.js配置文件</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>target<span class="token operator">:</span> <span class="token string">'web'</span><span class="token punctuation">,</span> <span class="token comment">// 这个不配置有时会出问题！</span>
devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    hot<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>浏览器可以看到如下效果</p> <p><img src="/assets/img/image-20220128001224736.3b6dc6e1.png" alt="image-20220128001224736"></p> <p>但是你会发现，<strong>当我们修改了某一个模块的代码时，依然是刷新的整个页面</strong>。这是因为我们需要去<strong>指定哪些模块发生更新</strong>时，进行HMR。<strong>导入文件的方式还需要添加HMR方式</strong>！！！如main.js中：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">'./js/element'</span><span class="token punctuation">;</span> <span class="token comment">// 旧方式，不能删</span>

<span class="token comment">// HMR 方式</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span>hot<span class="token punctuation">)</span> <span class="token punctuation">{</span>
 	module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token string">'./js/element.js'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'element HMR'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>上面方式太麻烦了！！！</p> <h4 id="框架的hmr-🔥"><a href="#框架的hmr-🔥" class="header-anchor">#</a> 框架的HMR 🔥</h4> <p>在开发其他项目时，<strong>我们是否需要经常手动去写入 module.hot.accpet相关的API呢</strong>?比如开发Vue、React项目，我们修改了组件，希望进行热更新，这个时候应该如何去操作呢? 事实上社区已经针对这些有很成熟的解决方案了;</p> <ul><li><p>比如vue开发中，我们使用vue-loader，此loader<strong>支持vue组件的HMR</strong>，提供开箱即用的体验;</p></li> <li><p>比如react开发中，有React Hot Loader，实时调整react组件(目前React官方已经弃用了，改成使用react-refresh);</p></li></ul> <p>注意：有时TS文件的HMR也需要手动配置！使用vben项目时遇到该问题！</p> <h4 id="hmr-原理-🔥"><a href="#hmr-原理-🔥" class="header-anchor">#</a> HMR 原理 🔥</h4> <p>webpack-dev-server会创建两个服务:提供静态资源的服务(<strong>express</strong>)和Socket服务(<strong>net.Socket</strong>);</p> <ul><li>express server负责直接提供静态资源的服务(打包后的资源直接被浏览器请求和解析);</li> <li><strong>HMR Socket Server，是一个socket的长连接</strong> <ul><li>长连接有一个最好的好处是<strong>建立连接后双方可以通信</strong>(服务器可以直接发送文件到客户端);</li> <li>当服务器<strong>监听到对应的模块发生变化时</strong>，会生成<strong>两个文件.json(manifest文件)和.js文件(update chunk)</strong>;</li> <li>通过长连接，可以<strong>直接将这两个文件主动发送给客户端(浏览器)</strong>;</li> <li><strong>浏览器拿到两个新的文件后</strong>，通过HMR runtime机制，<strong>加载</strong>这两个文件，并且针对修改的模块进行更新;</li></ul></li></ul> <p><img src="/assets/img/image-20220128002445417.5a65f0a8.png" alt="image-20220128002445417"></p> <h2 id="resolve-模块解析配置"><a href="#resolve-模块解析配置" class="header-anchor">#</a> resolve 模块解析配置</h2> <h3 id="介绍-4"><a href="#介绍-4" class="header-anchor">#</a> 介绍</h3> <p>resolve用于设置模块如何被解析:</p> <ul><li>在开发中我们会有各种各样的模块依赖，这些模块可能来自于自己编写的代码，也可能来自第三方库;</li> <li>resolve可以帮助webpack从每个 require/import 语句中，找到需要引入到合适的模块代码;</li> <li>webpack 使用 <a href="https://github.com/webpack/enhanced-resolve" target="_blank" rel="noopener noreferrer">enhanced-resolve<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 来解析文件路径;</li></ul> <h3 id="路径"><a href="#路径" class="header-anchor">#</a> 路径</h3> <p><strong>webpack能解析三种文件路径</strong></p> <ul><li>绝对路径：由于已经获得文件的绝对路径，因此不需要再做进一步解析</li> <li>相对路径：
<ul><li>在这种情况下，使用 import 或 require 的资源文件所处的目录，被认为是上下文目录</li> <li>在 import/require 中给定的相对路径，会拼接此上下文路径，来生成模块的绝对路径</li></ul></li> <li><strong>模块路径</strong>（如 <code>import { createApp } from 'vue';</code>：
<ul><li>在 resolve.modules中指定的所有目录检索模块。默认值是 ['node_modules']，所以默认会从node_modules中查找文件</li> <li>我们可以通过<strong>设置别名</strong>的方式来替换初识模块路径，具体后面讲解<strong>alias</strong>的配置</li></ul></li></ul> <h3 id="文件？文件夹？"><a href="#文件？文件夹？" class="header-anchor">#</a> 文件？文件夹？</h3> <ul><li><p>如果是一个文件</p> <ul><li>如果文件具有扩展名，则直接打包文件</li> <li>否则，将使用 resolve.extensions选项作为文件扩展名解析（依次匹配扩展查询文件）</li></ul></li> <li><p>如果是一个文件夹</p> <p>会<strong>在文件夹中</strong>根据 resolve.mainFiles配置选项中指定的<strong>文件顺序</strong>查找</p> <ul><li>resolve.mainFiles的默认值是 <code>['index']</code></li> <li>再根据 resolve.extensions来解析扩展名</li></ul> <p>所以一般查找到index文件</p></li></ul> <h3 id="extensions和alias配置"><a href="#extensions和alias配置" class="header-anchor">#</a> extensions和alias配置</h3> <p>extensions是解析到文件时自动添加扩展名:</p> <ul><li>默认值是 ['.wasm', '.mjs', '.js', '.json'];</li> <li>所以如果我们代码中想要添加加载 .vue 或者 jsx 或者 ts 等文件时，我们必须自己写上扩展名;</li></ul> <p>另一个非常好用的功能是配置别名alias:</p> <ul><li>特别是当我们项目的目录结构比较深的时候，或者一个文件的路径可能需要 ../../../这种路径片段;</li> <li>我们可以给某些常见的路径起一个别名;</li></ul> <h3 id="配置-🔥"><a href="#配置-🔥" class="header-anchor">#</a> 配置 🔥</h3> <p>修改webpack.config.js配置文件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    extensions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;.js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.json&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.mjs&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.vue&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.ts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.jsx&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.tsx&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    alias<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;@&quot;</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;./src&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token string">&quot;js&quot;</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;./src/js&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="分离开发生产环境-🔥"><a href="#分离开发生产环境-🔥" class="header-anchor">#</a> 分离开发生产环境 🔥</h2> <p>目前我们所有的webpack配置信息都是放到一个配置文件中的:webpack.config.js</p> <ul><li><p>当配置越来越多时，这个文件会变得越来越不容易维护;</p></li> <li><p>并且某些配置是在开发环境需要使用的，某些配置是在生成环境需要使用的，当然某些配置是在开发和生成环 境都会使用的;</p></li> <li><p>所以，我们最好对配置进行划分，方便我们维护和管理;</p></li></ul> <p>那么，在启动时如何可以区分不同的配置呢?</p> <ul><li><p>方案一：编写两个不同的配置文件，开发和生成时，分别加载不同的配置文件即可;</p></li> <li><p>方式二：使用相同的一个入口配置文件，通过设置参数来区分它们;</p> <p>修改package.json</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --config ./config/webpack.prod.config.js&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;serve&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack serve --config ./config/webpack.dev.config.js&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>   
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>安装<code>merge</code></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> webpack-merge -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <p>配置文件</p> <p>/config/webpack.comm.config.js</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;html-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> DefinePlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> VueLoaderPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'vue-loader/dist/index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  target<span class="token operator">:</span> <span class="token string">&quot;web&quot;</span><span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token string">&quot;./src/main.js&quot;</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;../build&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token operator">:</span> <span class="token string">&quot;js/bundle.js&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    extensions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;.js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.json&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.mjs&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.vue&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.ts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.jsx&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.tsx&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    alias<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;@&quot;</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;../src&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token string">&quot;js&quot;</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;../src/js&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;postcss-loader&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;less-loader&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// },</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(jpe?g|png|gif|svg)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        type<span class="token operator">:</span> <span class="token string">&quot;asset&quot;</span><span class="token punctuation">,</span>
        generator<span class="token operator">:</span> <span class="token punctuation">{</span>
          filename<span class="token operator">:</span> <span class="token string">&quot;img/[name]_[hash:6][ext]&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        parser<span class="token operator">:</span> <span class="token punctuation">{</span>
          dataUrlCondition<span class="token operator">:</span> <span class="token punctuation">{</span>
            maxSize<span class="token operator">:</span> <span class="token number">10</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(eot|ttf|woff2?)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        type<span class="token operator">:</span> <span class="token string">&quot;asset/resource&quot;</span><span class="token punctuation">,</span>
        generator<span class="token operator">:</span> <span class="token punctuation">{</span>
          filename<span class="token operator">:</span> <span class="token string">&quot;font/[name]_[hash:6][ext]&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        loader<span class="token operator">:</span> <span class="token string">&quot;babel-loader&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.vue$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        loader<span class="token operator">:</span> <span class="token string">&quot;vue-loader&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      template<span class="token operator">:</span> <span class="token string">&quot;./public/index.html&quot;</span><span class="token punctuation">,</span>
      title<span class="token operator">:</span> <span class="token string">&quot;哈哈哈哈&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token constant">BASE_URL</span><span class="token operator">:</span> <span class="token string">&quot;'./'&quot;</span><span class="token punctuation">,</span>
      __VUE_OPTIONS_API__<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      __VUE_PROD_DEVTOOLS__<span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">VueLoaderPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br></div></div><p>/config/webpack.dev.config.js</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> merge <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> commonConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.comm.config'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>commonConfig<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">&quot;development&quot;</span><span class="token punctuation">,</span>
  devtool<span class="token operator">:</span> <span class="token string">&quot;source-map&quot;</span><span class="token punctuation">,</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    contentBase<span class="token operator">:</span> <span class="token string">&quot;./public&quot;</span><span class="token punctuation">,</span>
    hot<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// host: &quot;0.0.0.0&quot;,</span>
    port<span class="token operator">:</span> <span class="token number">7777</span><span class="token punctuation">,</span>
    open<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// compress: true,</span>
    proxy<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;/api&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        target<span class="token operator">:</span> <span class="token string">&quot;http://localhost:8888&quot;</span><span class="token punctuation">,</span>
        pathRewrite<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string">&quot;^/api&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        secure<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        changeOrigin<span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>/config/webpack.prod.config.js</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> CleanWebpackPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;clean-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> CopyWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'copy-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>merge<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> commonConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.comm.config'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>commonConfig<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&quot;./public&quot;</span><span class="token punctuation">,</span>
          globOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
            ignore<span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token string">&quot;**/index.html&quot;</span>
            <span class="token punctuation">]</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div></div></div> <div class="page-slot page-slot-bottom"><!-- 横向自适应 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6620245489"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/xugaoyi/vuepress-theme-vdoing/edit/master/docs/1301.Webpack/100.Webpack5/101.入门.md" target="_blank" rel="noopener noreferrer">编辑</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/01/28, 01:18:28</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><!----> <a href="/pages/e2b92d/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Webpack-1 入门</div></a></div> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/pages/e2b92d/">Webpack-1 入门</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/fa4384/"><div>Vuex</div></a> <span>02-08</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/47a190/"><div>状态管理</div></a> <span>02-08</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/1c8fc2/"><div>VueRouter</div></a> <span>02-08</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:wu_haonan@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/apple54whn" title="GitHub" target="_blank" class="iconfont icon-github"></a><a title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2022
    <span></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">跟随系统</li><li class="iconfont icon-rijianmoshi">浅色模式</li><li class="iconfont icon-yejianmoshi">深色模式</li><li class="iconfont icon-yuedu">阅读模式</li></ul></div></div> <!----> <!----> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><i class="close-but">×</i> <div><!-- 固定160*160px -->
      <ins class="adsbygoogle"
          style="display:inline-block;max-width:160px;max-height:160px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="8377369658"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      </div></div></div></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.b0138120.js" defer></script><script src="/assets/js/2.d80cefae.js" defer></script><script src="/assets/js/3.bb117ab4.js" defer></script>
  </body>
</html>