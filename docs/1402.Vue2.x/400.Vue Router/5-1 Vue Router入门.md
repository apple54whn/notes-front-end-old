---
title: å…¥é—¨
date: 2020-12-27 00:50:31
permalink: /pages/9741e2/
categories:
  - Vue
  - Vue Router
tags:
  -
---

# å…¥é—¨

## ç®€ä»‹

### è·¯ç”±ç®€ä»‹

- è·¯ç”±å°±æ˜¯é€šè¿‡äº’è”çš„ç½‘ç»œæŠŠä¿¡æ¯**ä»æºåœ°å€ä¼ é€åˆ°ç›®çš„åœ°çš„æ´»åŠ¨**ï¼Œç½‘ç»œå·¥ç¨‹æœ¯è¯­
- è·¯ç”±æä¾›äº†ä¸¤ç§æœºåˆ¶ï¼š**è·¯ç”±**å’Œ**ä¼ é€**
  - è·¯ç”±æ˜¯å†³å®šæ•°æ®åŒ…ä»æ¥æºåˆ°ç›®çš„åœ°çš„**è·¯å¾„**
  - è½¬é€å°±æ˜¯**å°†æ•°æ®è½¬ç§»**
- **è·¯ç”±è¡¨**
  - è·¯ç”±è¡¨æœ¬è´¨å°±æ˜¯ä¸€ä¸ª**æ˜ å°„è¡¨**ï¼Œå†³å®šäº†æ•°æ®åŒ…çš„æŒ‡å‘

### åç«¯ & å‰ç«¯è·¯ç”± ğŸ”¥

1.  **åç«¯æ¸²æŸ“ï¼ŒæœåŠ¡ç«¯æ¸²æŸ“ï¼ˆåç«¯è·¯ç”±ï¼‰é˜¶æ®µ**ï¼šå‰ç«¯è¯·æ±‚ä¸€ä¸ª URL åï¼Œç”±ä¾‹å¦‚ Java å¦‚ SpringMVC ä¸­ @RequestMapping æ¥æ˜ å°„åˆ° Java ä»£ç ä¸­ï¼Œå¹¶é€šè¿‡ Servlet å’Œ JSP æŠ€æœ¯ç¼–å†™ HTML é¡µé¢ï¼ˆJS+CSSï¼‰å¹¶å¡«å……æ•°æ®ï¼Œæœ€åè¿”å›ç»™å‰ç«¯å®Œæ•´çš„ HTMLï¼Œå‰ç«¯ç›´æ¥æ¸²æŸ“å±•ç¤ºå³å¯ã€‚è¿™ç§**ç”±åç«¯å¤„ç† URL å’Œé¡µé¢æ˜ å°„å…³ç³»çš„ç§°ä¸ºåç«¯è·¯ç”±**ã€‚

2.  **å‰åç«¯åˆ†ç¦»é˜¶æ®µï¼ˆGmail çš„ Ajax å¤§é‡ä½¿ç”¨ï¼‰** ï¼šå‰ç«¯è¯·æ±‚ä¸€ä¸ª URL åï¼Œå¯èƒ½å…ˆä»é™æ€èµ„æºæœåŠ¡å™¨è·å–ä¸€å¥— HTML+CSS+JSï¼ˆæœåŠ¡å™¨ä¸­æœ‰å¤šå¥—ï¼‰ï¼Œä¹‹åå†ç”± JS å‘é€ Ajax è¯·æ±‚åˆ°åç«¯ï¼Œç”±åç«¯è¿”å›å¦‚ JSON æ•°æ®äº¤ç»™å‰ç«¯ï¼Œå‰ç«¯ä½¿ç”¨ JS è¿›è¡Œæ•°æ®å¡«å……ï¼Œæ¸²æŸ“ DOMã€‚**æ¯æ¬¡ URL æ”¹å˜éƒ½ä¼šè¯·æ±‚åç«¯æœåŠ¡å™¨æ‹¿é™æ€èµ„æºå’Œæ•°æ®**ã€‚

3.  **å•é¡µé¢å¯Œåº”ç”¨ï¼ˆSPA é¡µé¢ï¼‰ï¼Œå‰åç«¯åˆ†ç¦»åŠ ä¸Šå‰ç«¯è·¯ç”±é˜¶æ®µ**ï¼š å‰ç«¯ç¬¬ä¸€æ¬¡è¯·æ±‚ URL åï¼Œä¼šä»å¦‚é™æ€èµ„æºæœåŠ¡å™¨è·å–ä¸€å¥—å®Œæ•´çš„ HTML+CSS+JSï¼ˆåªæœ‰ä¸€ä¸ª HTMLï¼Œå…¶ä»– JS æˆ– CSS å¯èƒ½ä¼šæ‡’åŠ è½½ï¼‰ï¼Œ**ä¹‹åçš„ URL æ”¹å˜ä¸ä¼šå‘åç«¯æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œé¡µé¢ä¸è¿›è¡Œæ•´ä½“åˆ·æ–°**ï¼Œè€Œæ˜¯ç”±å…¶ä¸åŒçš„ URL é¡µé¢è‡ªå·±**å‘é€ Ajax è¯·æ±‚è·å–æ•°æ®å¹¶ç”± JS è¿›è¡Œæ•°æ®å¡«å……**ï¼Œæ¸²æŸ“ DOMã€‚**è¿™ç§ç”±å‰ç«¯å¤„ç† URL å’Œé¡µé¢çš„æ˜ å°„å…³ç³»ç§°ä¸ºå‰ç«¯è·¯ç”±**ã€‚

    é‚£ä¹ˆå¦‚ä½•åœ¨ URL æ”¹å˜åé¡µé¢è¿˜ä¸è¿›è¡Œæ•´ä½“åˆ·æ–°å‘¢ï¼Ÿä¸”çœ‹ä¸‹é¢ä»‹ç»ã€‚

### URL çš„ hash & HTML5 çš„ history ğŸ”¥

::: tip

Vue CLI åˆå§‹åŒ–é¡¹ç›®æ—¶æ¨èé€‰æ‹© history æ¨¡å¼ã€‚URL çœ‹èµ·æ¥æ›´å‹å¥½ï¼Œæ²¡æœ‰`#`è¿™ç©æ„

:::

URL çš„ hash æ˜¯æ”¹å˜é”šç‚¹`#`ï¼Œå…¶æœ¬è´¨ä¸Šæ”¹å˜çš„æ˜¯ window.location.hash å±æ€§ï¼Œä¸æ˜¯ href å±æ€§

```
location.hash = '/user/10000'
http://localhost:8082/#/user/10000

location.hash = '/role/1'
http://localhost:8082/#/role/1
```

HTML5 çš„ historyã€‚æ˜¯ä¸€ä¸ª**æ ˆç»“æ„**

```bash
history.pushState('','','/user/100001')
http://localhost:8082/user/100001

history.pushState('','','/role/1')
http://localhost:8082/role/1

history.back()
http://localhost:8082/user/100001

history.forward()
http://localhost:8082/role/1

history.replaceState('','','/permission/100')
http://localhost:8082/permission/100
# æ­¤æ—¶å°†ä¸Šé¢çš„ http://localhost:8082/role/1 æ›¿æ¢æ‰äº†ï¼Œä¹‹åæ— æ³• back å›å»ï¼Œåªèƒ½ back åˆ° http://localhost:8082/user/100001

# go å¯ä»¥æ›´çµæ´»æ§åˆ¶ï¼Œç›¸æ¯” backï¼Œforward
history.go(-1)
history.go(1)
history.go(-2)
history.go(2)
```

**Vue Router å°±æ˜¯å°†ç»„ä»¶å’Œ URL æ˜ å°„**

## å®‰è£…å’Œé…ç½® ğŸ”¥

å®‰è£…ã€‚æœ‰çš„æ¨èåŠ ä¸Š`--save`ï¼Œä»£è¡¨å®‰è£…åˆ°**æ­£å¼ä¾èµ–ä¸­**

```bash
npm install vue-router
```

æ¨¡å—åŒ–å·¥ç¨‹ä¸­ä½¿ç”¨å¿…é¡»è¦é€šè¿‡ `Vue.use()` æ˜ç¡®åœ°**å®‰è£…è·¯ç”±æ’ä»¶**åŠŸèƒ½ï¼Œ**åˆ›å»ºè·¯ç”±å®ä¾‹ï¼Œä¼ å…¥è·¯ç”±æ˜ å°„é…ç½®**

```js
import Vue from 'vue'
import VueRouter from 'vue-router'
// å¯ä»¥çœç•¥åç¼€(resolve.extensionsé…ç½®çš„ä½œç”¨)ï¼›ä¸æ¨èåœ¨è¿™é‡Œå¯¼å…¥ï¼Œæ¨èå¦‚ä¸‹æ‡’åŠ è½½æ–¹å¼
import Home from '../components/Home'

// å®‰è£…è·¯ç”±æ’ä»¶åŠŸèƒ½
Vue.use(VueRouter)

// è·¯ç”±æ˜ å°„é…ç½®
const routes = [
  {
    path: '/', // æˆ– "" éƒ½å¯ä»¥
    name: 'Index',
    // é‡å®šå‘
    redirect: '/home',
  },
  {
    path: '/home',
    name: 'Home',
    component: Home,
  },
  {
    path: '/about',
    name: 'About',
    // route level code-splitting
    // this generates a separate chunk (about.[hash].js) for this route
    // which is lazy-loaded when the route is visited.
    component: () =>
      import(/* webpackChunkName: "about" */ '@/components/About'),
  },
  {
    path: '/user/:id',
    name: 'User',
    component: () => import('@/components/User'),
  },
]

// åˆ›å»ºè·¯ç”±å®ä¾‹ï¼Œä¼ å…¥è·¯ç”±æ˜ å°„é…ç½®
const router = new VueRouter({
  // historyæ¨¡å¼
  mode: 'history',
  base: process.env.BASE_URL,
  routes,
})

// å¯¼å‡º
export default router
```

**åœ¨ Vue å®ä¾‹ä¸­æŒ‚è½½åˆ›å»ºçš„è·¯ç”±å®ä¾‹**

```js
// /src/main.js

import Vue from 'vue'
import App from './App.vue'
// å¯¼å…¥ï¼Œ./router æ˜¯ä¸€ä¸ªç›®å½•ï¼Œä¼šè‡ªåŠ¨å¯¼å…¥ index æ–‡ä»¶
import router from './router'

Vue.config.productionTip = false

// æŒ‚è½½
new Vue({
  router,
  render: (h) => h(App),
}).$mount('#app')
```

## æ ‡ç­¾è·¯ç”± ğŸ”¥

### ä½¿ç”¨

```vue
<!-- /src/App.vue-->

<template>
  <div id="app">
    <div id="nav">
      <router-link to="/home">Home</router-link>
      <router-link to="/about">About</router-link>
    </div>
    <router-view />
  </div>
</template>

<script>
export default {
  name: 'App',
}
</script>

<style>
#app {
  font-family: Avenir, Helvetica, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-align: center;
  color: #2c3e50;
}

#nav {
  padding: 30px;
}

#nav a {
  font-weight: bold;
  color: #2c3e50;
}

#nav a.router-link-active {
  color: #42b983;
}
</style>
```

é‚£ä¸¤ä¸ªç»„ä»¶å°±ä¸å†™äº†ã€‚

### `<router-link>`

å…¨å±€ç»„ä»¶ï¼Œæœ€ç»ˆè¢«æ¸²æŸ“æˆ a æ ‡ç­¾ï¼Œä½†æ˜¯å®ƒ**åªæ˜¯æ ‡è®°è·¯ç”±æŒ‡å‘ç±»ä¼¼ä¸€ä¸ª a æ ‡ç­¾æˆ–è€…æŒ‰é’®ä¸€æ ·**ï¼Œè‹¥æ˜¯æˆ‘ä»¬ç‚¹å‡» a æ ‡ç­¾è¦è·³è½¬é¡µé¢æˆ–è€…è¦æ˜¾ç¤ºé¡µé¢ï¼Œæ‰€ä»¥å°±è¦ç”¨ä¸Šå®ƒã€‚

- `to`å±æ€§ï¼šç”¨äºè·³è½¬åˆ°æŒ‡å®šè·¯å¾„

- `tag`å±æ€§ï¼šå¯ä»¥æŒ‡å®š`<router-link>`ä¹‹åæ¸²æŸ“æˆä»€ä¹ˆç»„ä»¶ä½¿ç”¨`<router-link to='/home' tag='button'>`ä¼šè¢«æ¸²æŸ“æˆä¸€ä¸ªæŒ‰é’®ï¼Œè€Œä¸æ˜¯ a æ ‡ç­¾

- `relapce`å±æ€§ï¼šåœ¨ history æ¨¡å¼ä¸‹æŒ‡å®š`<router-link to='/home' tag='button' replace>`ä½¿ç”¨ replaceState è€Œä¸æ˜¯ pushStateï¼Œæ­¤æ—¶æµè§ˆå™¨çš„è¿”å›æŒ‰é’®å°†ä¸èƒ½è¿”å›æ›¿æ¢å‰çš„è·¯ç”±

- `active-class`å±æ€§ï¼šå½“`<router-link>`å¯¹åº”çš„è·¯ç”±åŒ¹é…æˆåŠŸçš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨ç»™å½“å‰å…ƒç´ è®¾ç½®ä¸€ä¸ª`router-link-active`çš„ classï¼Œè®¾ç½®`active-class`å±æ€§å€¼å¯ä»¥ä¿®æ”¹é»˜è®¤çš„åç§°ã€‚

  - åœ¨è¿›è¡Œé«˜äº®æ˜¾ç¤ºçš„å¯¼èˆªèœå•æˆ–è€…åº•éƒ¨ tabbar æ—¶ï¼Œä¼šç”¨åˆ°è¯¥å±æ€§ã€‚ä½†æ˜¯é€šå¸¸ä¸ä¼šä¿®æ”¹ç±»çš„å±æ€§ï¼Œä¼šç›´æ¥ä½¿ç”¨é»˜è®¤çš„`router-link-active`

  - `<router-link to='/home' tag='button' active-class='active'>`æ­¤æ—¶è¢«é€‰ä¸­çš„`<router-link>`å°±ä¼šæœ‰ active çš„ classã€‚

  - å¦‚æœæ¯ä¸ª`<router-link>`éƒ½è¦åŠ ä¸Š`active-class='active'`ï¼Œé‚£å°±åœ¨è·¯ç”±é‡Œé¢ç»Ÿä¸€æ›´æ”¹ã€‚

    ```js
    const router = new Router({
      //é…ç½®è·¯ç”±å’Œç»„ä»¶ä¹‹é—´çš„åº”ç”¨å…³ç³»
      routes,
      mode: 'history', //ä¿®æ”¹æ¨¡å¼ä¸ºhistory
      linkActiveClass: 'active',
    })
    ```

### `<router-view>`

ç”¨æ¥**å ä½çš„ï¼Œå°±æ˜¯è·¯ç”±å¯¹åº”çš„ç»„ä»¶å±•ç¤ºçš„åœ°æ–¹**ï¼Œè¯¥æ ‡ç­¾ä¼šæ ¹æ®å½“å‰çš„è·¯å¾„ï¼ŒåŠ¨æ€æ¸²æŸ“å‡ºä¸åŒçš„ç»„ä»¶ã€‚

è·¯ç”±åˆ‡æ¢çš„æ—¶å€™åˆ‡æ¢çš„æ˜¯å®ƒæŒ‚è½½çš„ç»„ä»¶ï¼Œå…¶ä»–ä¸ä¼šå‘ç”Ÿæ”¹å˜ã€‚å®ƒé»˜è®¤ä½¿ç”¨ hash æ¨¡å¼ï¼Œå¯ä»¥åœ¨ src/router/index.js ä¸­é…ç½®ä¿®æ”¹ä¸º history æ¨¡å¼ã€‚

## ä»£ç è·¯ç”± ğŸ”¥

```vue
<template>
  <div id="app">
    <div id="nav">
      <!-- å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ router-link å’Œ tag æ¥å®ç°ã€‚ä½†æ˜¯å¿…é¡»æœ‰ to å±æ€§ï¼Œæ‰€ä»¥è‡ªå·±æ–Ÿé…Œä½¿ç”¨åœºæ™¯ã€‚
			è¿™é‡Œ button ä¹Ÿä¸ä¼šæ·»åŠ  class -->
      <button @click="goHome">Home</button>
      <button @click="goAbout">About</button>
    </div>
    <router-view />
  </div>
</template>

<script>
export default {
  name: 'App',
  methods: {
    goHome() {
      // vue-router ç»™æ‰€æœ‰ç»„ä»¶éƒ½æ·»åŠ äº† $router å±æ€§ã€‚è¿˜æœ‰replaceæ–¹æ³•ï¼
      console.log(this.$route)
      // ä¸åˆ¤æ–­ï¼Œåˆ™ç¬¬äºŒæ¬¡ç‚¹å‡»åŒä¸€è·¯ç”±æŠ¥é”™
      if (this.$route.path !== '/home') {
        this.$router.push('/home')
      }
    },
    goAbout() {
      if (this.$route.path !== '/about') {
        this.$router.push('/about')
      }
    },
  },
}
</script>

<style>
#app {
  font-family: Avenir, Helvetica, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-align: center;
  color: #2c3e50;
}

#nav {
  padding: 30px;
}

#nav a {
  font-weight: bold;
  color: #2c3e50;
}
</style>
```

## åŠ¨æ€è·¯ç”± ğŸ”¥

ç”±äºè·¯ç”±ä¸­çš„ `path`æ˜¯å…¨åŒ¹é…ï¼Œä¾‹å¦‚`/user`æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ï¼Œè‹¥æ­¤æ—¶ URL ä¸º`/user/1`åˆ™åŒ¹é…ä¸åˆ°ï¼Œä½†æ˜¯è¿™ä¸ª 1 åˆä¸èƒ½å†™æ­»ï¼

```js
{
    path: '/user/:id',
    name: 'User',
    component: () => import('@/components/User')
}
```

```vue
<router-link :to="'/user/' + user.id">User</router-link>
<!-- user.id ä¸ºåŠ¨æ€è·å–çš„ -->
```

```vue
<template>
  <div>
    <h1>User</h1>
    <h2>{{ userId }}</h2>
  </div>
</template>

<script>
export default {
  computed: {
    userId() {
      // æ‹¿åˆ°è·¯ç”±ä¸Šçš„åŠ¨æ€å‚æ•°
      return this.$route.params.id
    },
  },
}
</script>

<style></style>
```

æ³¨æ„ï¼Œæ‰‹åŠ¨è¾“å…¥ URL å³ä½¿åŒ¹é…åˆ°è·¯ç”±ï¼Œä¹Ÿä¸ä¼šæ·»åŠ  active classï¼

## è·¯ç”±æ‡’åŠ è½½ ğŸ”¥

vue-router æ‰“åŒ…æ–‡ä»¶è§£æé—®é¢˜ï¼šæ‰“åŒ…æ—¶å€™ JS å¤ªå¤§ï¼Œé¡µé¢å“åº”ç¼“æ…¢

**å¦‚æœç»„ä»¶æ¨¡å—åŒ–äº†ï¼Œå½“è·¯ç”±è¢«è®¿é—®çš„æ—¶å€™æ‰å¼€å§‹åŠ è½½è¢«é€‰ä¸­çš„ç»„ä»¶**ï¼Œè¿™æ ·å°±æ˜¯è·¯ç”±æ‡’åŠ è½½ã€‚**ä¸€ä¸ªè·¯ç”±å¯¹åº”ä¸€ä¸ª JS æ–‡ä»¶**ã€‚

```js
component: () => import('@/components/User')
```

ä½¿ç”¨`npm run build`å‘½ä»¤å°†ä¹‹å‰åˆ›å»ºçš„é¡¹ç›®æ‰“åŒ…ï¼Œæ‰“å¼€ dist æ–‡ä»¶å¤¹ï¼Œå™¨ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š

<img src="../images/image-20200623231001241.png" alt="image-20200623231001241" style="zoom:50%;" />

ä»¥ä¸‹æ˜¯ Vue CLI 2 çš„ä»£ç 

- app.xxx.js æ˜¯æˆ‘ä»¬è‡ªå·±ç¼–å†™çš„ä¸šåŠ¡ä»£ç 
- vendor.xxx.js æ˜¯ç¬¬ä¸‰æ–¹æ¡†æ¶ï¼Œä¾‹å¦‚ vue/vue-router/axios ç­‰
- mainfest.xxx.js æ˜¯ä¸ºäº†æ‰“åŒ…çš„ä»£ç åšåº•å±‚æ”¯æŒçš„ï¼Œä¸€èˆ¬æ˜¯ webpack å¸®æˆ‘ä»¬åšä¸€äº›äº‹æƒ…
- é™¤äº†è¿™ä¸‰ä¸ªè¿˜å¤šäº† 2 ä¸ª jsï¼Œè¿™ 2 ä¸ª js æ–‡ä»¶ï¼ˆ0.5bxxx.js å’Œ 1.e5xxx.jsï¼‰åˆ†åˆ«æ˜¯ About å’Œ User ç»„ä»¶ï¼Œå› ä¸ºè¿™ 2 ä¸ªç»„ä»¶æ˜¯æ‡’åŠ è½½çš„æ‰€ä»¥è¢«åˆ†å¼€æ‰“åŒ…äº†ã€‚

æ­¤æ—¶å› ä¸ºæ˜¯æ‡’åŠ è½½ï¼Œéœ€è¦ç”¨åˆ°è¿™ä¸ªç»„ä»¶çš„æ—¶å€™æ‰ä¼šåŠ è½½ï¼Œæ‰€ä»¥ä¸ä¼šä¸€æ¬¡æ€§è¯·æ±‚æ‰€æœ‰ JSã€‚

## åµŒå¥—è·¯ç”± ğŸ”¥

å¹³å¸¸åœ¨ä¸€ä¸ª home é¡µé¢ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦`/home/news`å’Œ`/home/message`è®¿é—®ä¸€äº›å†…å®¹ï¼Œä¸€ä¸ªè·¯ç”±æ˜ å°„ä¸€ä¸ªç»„ä»¶å°±åƒåç«¯ä¸€ä¸ª api å¯¹åº”ä¸€ä¸ª controller çš„ä¸€ä¸ª requestMapping ä¸€æ ·ï¼Œè®¿é—®ä¸¤ä¸ªè·¯ç”±ä¹Ÿä¼šåˆ†åˆ«æ¸²æŸ“è¿™ä¸¤ä¸ªç»„ä»¶ã€‚

è¦å®ç°åµŒå¥—è·¯ç”±ï¼š

- åˆ›å»ºå¯¹åº”çš„å­ç»„ä»¶ï¼Œå¹¶ä¸”åœ¨è·¯ç”±æ˜ å°„`router/index.js`ä¸­é…ç½®å¯¹åº”çš„å­è·¯ç”±ã€‚

- åœ¨ç»„ä»¶å†…éƒ¨ä½¿ç”¨`<router-view>`æ ‡ç­¾æ¥å ä½ã€‚

```js
// /router/index.js

import Vue from 'vue'
import VueRouter from 'vue-router'

// å®‰è£…è·¯ç”±æ’ä»¶åŠŸèƒ½
Vue.use(VueRouter)

// è·¯ç”±æ˜ å°„é…ç½®
const routes = [
  {
    path: '', // æˆ– "/" éƒ½å¯ä»¥
    name: 'Index',
    // é‡å®šå‘
    redirect: '/home',
  },
  {
    path: '/home',
    name: 'Home',
    component: () => import('@/components/Home'),
    children: [
      {
        path: '', // æˆ– "/" éƒ½å¯ä»¥
        // åç»­ä¹Ÿä¸è¿™æ ·ä½¿ç”¨ï¼Œä½¿ç”¨ keep-alive æ¥é€‰æ‹©ä¸Šæ¬¡é€‰æ‹©çš„è·¯ç”±
        redirect: 'news',
      },
      {
        // ä¸å¯ä»¥åŠ  /ï¼Œä¹Ÿä¸å¯ä»¥åŠ  /home
        path: 'news',
        component: () => import('@/components/HomeNews'),
      },
      {
        // ä¸å¯ä»¥åŠ  /ï¼Œä¹Ÿä¸å¯ä»¥åŠ  /home
        path: 'message',
        component: () => import('@/components/HomeMessage'),
      },
    ],
  },
  {
    path: '/about',
    name: 'About',
    // route level code-splitting
    // this generates a separate chunk (about.[hash].js) for this route
    // which is lazy-loaded when the route is visited.
    component: () =>
      import(/* webpackChunkName: "about" */ '@/components/About'),
  },
  {
    path: '/user/:id',
    name: 'User',
    component: () => import('@/components/User'),
  },
]

// åˆ›å»ºè·¯ç”±å®ä¾‹ï¼Œä¼ å…¥è·¯ç”±æ˜ å°„é…ç½®
const router = new VueRouter({
  // historyæ¨¡å¼
  mode: 'history',
  base: process.env.BASE_URL,
  routes,
})

// å¯¼å‡º
export default router
```

```vue
<!-- /components/Home.vue -->

<template>
  <div>
    <h1>Home</h1>
    <router-link to="/home/news">News</router-link>ï½œ
    <router-link to="/home/message">Message</router-link>
    <router-view></router-view>
  </div>
</template>

<script>
export default {
  name: 'Home',
}
</script>
```

## ä¼ é€’å‚æ•° ğŸ”¥

è·¯ç”±è·³è½¬é—´ä¼ é€’å‚æ•°

### æ–¹å¼ä¸€ï¼šåŠ¨æ€è·¯ç”± & params

- é…ç½®è·¯ç”±çš„æ ¼å¼ï¼š`/user/:id`
- ä¼ é€’æ—¶éœ€è¦æ‹¼æ¥ï¼Œæœ€ç»ˆå½¢æˆçš„è·¯å¾„ï¼š`/user/123`ï¼Œ`/user/xxx`
- é€šè¿‡`$route.params.id`è·å–æŒ‡å®š id

ä»£ç æŸ¥çœ‹åŠ¨æ€è·¯ç”±

### æ–¹å¼äºŒï¼šquery

- é…ç½®è·¯ç”±çš„æ ¼å¼ï¼š`/profile`ï¼Œä¹Ÿå°±æ˜¯æ™®é€šçš„é…ç½®

- ä¼ é€’çš„æ–¹å¼ï¼šå¯¹è±¡ä¸­ä½¿ç”¨ query çš„ key ä½œä¸ºä¼ é€’çš„æ–¹å¼

- ä¼ é€’å½¢æˆçš„è·¯å¾„ï¼š`/profile?name=conanan&age=18`è¿™ä¸ª query ä¼ é€’çš„æ˜¯ä¸¤ä¸ªé”®å€¼å¯¹

  `/profile?user=%5Bobject%20Object%5D`è¿™ä¸ª query ä¼ é€’çš„æ˜¯ä¸€ä¸ªå¯¹è±¡çš„é”®å€¼å¯¹ï¼Œkey ä¸º userï¼Œvalue æ˜¯ä¸€ä¸ªå¯¹è±¡

```vue
<template>
  <div id="app">
    <div id="nav">
      <router-link to="/home">Home</router-link>|
      <router-link to="/about">About</router-link>|
      <router-link :to="'/user/' + user.id">User</router-link>|
      <router-link
        :to="{ path: '/profile', query: { name: 'conanan', age: 18 } }"
        >Profile</router-link
      >

      <!-- å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ router-link å’Œ tag æ¥å®ç°ã€‚ä½†æ˜¯å¿…é¡»æœ‰ to å±æ€§ï¼Œæ‰€ä»¥è‡ªå·±æ–Ÿé…Œä½¿ç”¨åœºæ™¯ã€‚è¿™é‡Œ button ä¹Ÿä¸ä¼šæ·»åŠ  class -->
      <!-- <button @click="goHome">Home</button>
      <button @click="goAbout">About</button>
      <button @click="goProfile">Profile</button>-->
    </div>
    <router-view />
  </div>
</template>

<script>
export default {
  name: 'App',
  data() {
    return {
      user: {
        id: 10001,
      },
    }
  },
  methods: {
    goHome() {
      // vue-router ç»™æ‰€æœ‰ç»„ä»¶éƒ½æ·»åŠ äº† $router å±æ€§ã€‚è¿˜æœ‰replaceæ–¹æ³•ï¼
      console.log(this.$route)
      // ä¸åˆ¤æ–­ï¼Œåˆ™ç¬¬äºŒæ¬¡ç‚¹å‡»åŒä¸€è·¯ç”±æŠ¥é”™
      if (this.$route.path !== '/home') {
        this.$router.push('/home')
      }
    },
    goAbout() {
      if (this.$route.path !== '/about') {
        this.$router.push('/about')
      }
    },
    goProfile() {
      if (this.$route.path !== '/profile') {
        this.$router.push({
          path: '/profile',
          // query: { name: 'conanan', age: 18 }
          query: {
            user: {
              name: 'conanan',
              age: 25,
            },
          },
        })
      }
    },
  },
}
</script>

<style>
#app {
  font-family: Avenir, Helvetica, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-align: center;
  color: #2c3e50;
}

#nav {
  padding: 30px;
}

#nav a {
  font-weight: bold;
  color: #2c3e50;
}

#nav a.router-link-active {
  color: #42b983;
}
</style>
```

## $router & $route åŒºåˆ« ğŸ”¥

vue å…¨å±€å¯¹è±¡`this.$router`ä¸ main.js å¯¼å…¥çš„ router å¯¹è±¡æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬`/router/index.js`å¯¼å‡ºçš„å¯¹è±¡ routerï¼Œéƒ½æ˜¯åŒä¸€ä¸ª VueRouter å¯¹è±¡ã€‚å› ä¸º**æ‰€æœ‰çš„ç»„ä»¶éƒ½ç»§æ‰¿è‡ª Vue ç±»çš„åŸå‹ï¼ˆprototypeï¼‰**

`this.$route`å¯¹è±¡æ˜¯å½“å‰å¤„äºæ´»è·ƒçš„è·¯ç”±ï¼Œå°±æ˜¯ router ä¸­é…ç½®çš„æ˜ å°„å…³ç³»ï¼Œæœ‰ params å’Œ query å±æ€§å¯ä»¥ç”¨æ¥ä¼ é€’å‚æ•°ã€‚
