---
title: DOM
date: 1984-01-24 16:00:00
permalink: /pages/39c4a3/
categories:
  - JS
tags:
  -
---

# DOM

DOMï¼ˆdocument object modelï¼‰ï¼šå°†æ ‡è®°è¯­è¨€**æ–‡æ¡£**çš„å„ä¸ªç»„æˆéƒ¨åˆ†ï¼Œå°è£…ä¸º**å¯¹è±¡**ã€‚å¯ä»¥ä½¿ç”¨è¿™äº›å¯¹è±¡ï¼Œå¯¹æ ‡è®°è¯­è¨€æ–‡æ¡£è¿›è¡Œ CRUD çš„åŠ¨æ€æ“ä½œ

W3C DOM æ ‡å‡†è¢«åˆ†ä¸º 3 ä¸ªä¸åŒçš„éƒ¨åˆ†ï¼š

- **æ ¸å¿ƒ DOM** - é’ˆå¯¹ä»»ä½•ç»“æ„åŒ–æ–‡æ¡£çš„æ ‡å‡†æ¨¡å‹
  - **Node**ï¼šåŸç”ŸèŠ‚ç‚¹å¯¹è±¡ï¼Œä»¥ä¸‹èŠ‚ç‚¹å¯¹è±¡éƒ½ç»§æ‰¿äºæ­¤
  - **Document**ï¼šæ–‡æ¡£å¯¹è±¡ï¼Œæ•´ä¸ªæ–‡æ¡£æ ‘çš„é¡¶å±‚èŠ‚ç‚¹
  - DocumentTypeï¼š`doctype`æ ‡ç­¾ï¼ˆæ¯”å¦‚`<!DOCTYPE html>`
  - **Element**ï¼šå…ƒç´ å¯¹è±¡ï¼Œç½‘é¡µçš„å„ç§ HTML æ ‡ç­¾ï¼ˆæ¯”å¦‚`<body>`ã€`<a>`ç­‰ï¼‰
  - **Attribute**ï¼šå±æ€§å¯¹è±¡ï¼Œç½‘é¡µå…ƒç´ çš„å±æ€§ï¼ˆæ¯”å¦‚`class="right"`ï¼‰
  - **Text**ï¼šæ–‡æœ¬å¯¹è±¡ï¼Œæ ‡ç­¾ä¹‹é—´æˆ–æ ‡ç­¾åŒ…å«çš„æ–‡æœ¬
  - Commentï¼šæ³¨é‡Šå¯¹è±¡
  - DocumentFragmentï¼šæ–‡æ¡£çš„ç‰‡æ®µ
- XML DOM - é’ˆå¯¹ XML æ–‡æ¡£çš„æ ‡å‡†æ¨¡å‹
- **HTML DOM** - é’ˆå¯¹ HTML æ–‡æ¡£çš„æ ‡å‡†æ¨¡å‹

è§£æè¿‡ç¨‹ï¼šæ ¹æ® html çš„å±‚çº§ç»“æ„ï¼Œåœ¨å†…å­˜ä¸­åˆ†é…ä¸€ä¸ªæ ‘å½¢ç»“æ„ï¼Œéœ€è¦æŠŠ html ä¸­çš„æ¯éƒ¨åˆ†å°è£…æˆå¯¹è±¡

![](../images/ct_htmltree.png)

## Node ğŸ”¥

èŠ‚ç‚¹å¯¹è±¡ï¼Œå…¶ä»–å¯¹è±¡çš„çˆ¶å¯¹è±¡ã€‚æ‰€æœ‰ dom å¯¹è±¡éƒ½å¯ä»¥è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªèŠ‚ç‚¹

JS ä¸­æœ‰å®¿ä¸»å¯¹è±¡ documentï¼ˆæ–‡æ¡£å¯¹è±¡æœ¬èº«ï¼‰ï¼Œæ˜¯ window å¯¹è±¡çš„å±æ€§ã€‚DOM ä¸­çš„å¯¹è±¡åˆç§°ä¸ºèŠ‚ç‚¹å¯¹è±¡ï¼Œ4 ç§å¸¸ç”¨èŠ‚ç‚¹ï¼š

| nodeName               | nodeType  | nodeValue |          |
| :--------------------- | :-------- | :-------- | -------- |
| Document æ–‡æ¡£èŠ‚ç‚¹      | #document | 9         | null     |
| Element å…ƒç´ èŠ‚ç‚¹       | æ ‡ç­¾å    | 1         | null     |
| **Attribute** å±æ€§èŠ‚ç‚¹ | å±æ€§å    | 2         | å±æ€§å€¼   |
| Text æ–‡æœ¬èŠ‚ç‚¹          | #text     | 3         | æ–‡æœ¬å†…å®¹ |

### Node æ¥å£ ğŸ”¥

å±æ€§ï¼š

- `nodeType`ï¼šä¸€ä¸ªæ•´æ•°å€¼è¡¨ç¤º==**èŠ‚ç‚¹çš„ç±»å‹**==ã€‚å¦‚ Element ä¸º 1ã€Attribute ä¸º 2ã€Text ä¸º 3ã€Document ä¸º 9
- `nodeName`ï¼š**èŠ‚ç‚¹çš„åç§°**ã€‚å¦‚ Element ä¸ºå¤§å†™æ ‡ç­¾åã€Attribute ä¸ºå±æ€§åã€Text ä¸º`#text`ã€Document ä¸º`#document`
- `nodeValue`ï¼šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤º**å½“å‰èŠ‚ç‚¹**æœ¬èº«çš„**æ–‡æœ¬å€¼**ã€‚åªæœ‰ Attributeã€Textã€Comment æœ‰å€¼ï¼Œå…¶ä½™è¿”å›`null`
- `textContent`ï¼š**å½“å‰**èŠ‚ç‚¹å’Œå®ƒçš„**æ‰€æœ‰åä»£**èŠ‚ç‚¹çš„==**æ‰€æœ‰æ–‡æœ¬å†…å®¹**==ï¼Œè‡ªåŠ¨**å¿½ç•¥**å½“å‰èŠ‚ç‚¹å†…éƒ¨çš„ **HTML æ ‡ç­¾**
- `baseURI`ï¼šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºå½“å‰ç½‘é¡µçš„ç»å¯¹è·¯å¾„
- `ownerDocument`ï¼šå½“å‰èŠ‚ç‚¹æ‰€åœ¨çš„é¡¶å±‚æ–‡æ¡£å¯¹è±¡ï¼Œdocument æœ¬èº«çš„è¿™ä¸ªå±æ€§ä¸º`null`ã€‚ä¸`getRootNode()`ä¸€æ ·ä½œç”¨
- `previousSiblin`ï¼šå½“å‰èŠ‚ç‚¹==**å‰**==é¢çš„ã€è·ç¦»æœ€è¿‘çš„ä¸€ä¸ª**åŒçº§èŠ‚ç‚¹**ï¼Œæ²¡æœ‰åŒçº§èŠ‚ç‚¹åˆ™è¿”å›`null`
- `nextSibling`ï¼šç´§è·Ÿåœ¨å½“å‰èŠ‚ç‚¹==**å**==é¢çš„ç¬¬ä¸€ä¸ª**åŒçº§èŠ‚ç‚¹**ï¼Œæ²¡æœ‰åŒçº§èŠ‚ç‚¹åˆ™è¿”å›`null`
- **`parentNode`**ï¼š==å½“å‰èŠ‚ç‚¹çš„**çˆ¶èŠ‚ç‚¹**==ï¼Œå¯èƒ½æœ‰ä¸‰ç§ç±»å‹ï¼Œå¦‚ Documentã€Elementã€DocumentFragment
- `parentElement`ï¼šå½“å‰èŠ‚ç‚¹çš„**çˆ¶å…ƒç´ èŠ‚ç‚¹**ï¼Œæ’é™¤äº†ä¸Šè¿°ç±»å‹ä¸­é¦–å°¾ä¸¤ä¸ª

æ–¹æ³•(CRUD DOM æ ‘)ï¼š

- **`appendChild(newNode)`**ï¼š==å°†å…¶ä½œä¸º**æœ€åä¸€ä¸ªå­èŠ‚ç‚¹**ï¼Œ**æ’å…¥**å½“å‰èŠ‚ç‚¹==ã€‚è‹¥`newNode`ä¸º DOM ä¸­å·²å­˜åœ¨çš„ï¼Œç›¸å½“äº**å‰ªè´´**
- `insertBefore(newNode,oldNode)`ï¼šèŠ‚ç‚¹ä¹‹å‰æ’å…¥ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ï¼Œæ²¡æœ‰ insertAfter()æ–¹æ³•å¯ä»¥ç»“åˆ`nextSibling`å®ç°
- `removeChild(Node)`ï¼šé€šè¿‡çˆ¶èŠ‚ç‚¹åˆ é™¤æŒ‡å®šå­èŠ‚ç‚¹ï¼Œå¹¶è¿”å›è¢«åˆ é™¤çš„èŠ‚ç‚¹ã€‚ä¸å­˜åœ¨ DOM ä¸­ï¼Œä½†åœ¨å†…å­˜ä¸­ä»å¯ä½¿ç”¨
- `replaceChild(newNode,oldNode)`ï¼šé€šè¿‡çˆ¶èŠ‚ç‚¹ç”¨æ–°èŠ‚ç‚¹æ›¿æ¢ä¸€ä¸ªå­èŠ‚ç‚¹
- **`cloneNode(boolean b)`**ï¼š**å¤åˆ¶èŠ‚ç‚¹è¿”å›æ–°èŠ‚ç‚¹**ï¼Œboolean è¡¨ç¤º**æ˜¯å¦å¤åˆ¶å­èŠ‚ç‚¹**ï¼Œä¼šä¸§å¤±è¯¥èŠ‚ç‚¹ä¸Šçš„äº‹ä»¶å›è°ƒå‡½æ•°

- > `childNodes`ï¼šå½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹çš„`NodeList`é›†åˆï¼Œä½†æ˜¯åŒ…æ‹¬ Textã€Commnetï¼ç©ºæ ¼ä¹‹ç±»çš„éƒ½åŒ…æ‹¬ï¼åˆ«ç”¨ï¼
  >
  > `hasChildNodes()`ï¼šå½“å‰èŠ‚ç‚¹æ˜¯å¦æœ‰å­èŠ‚ç‚¹ï¼Œä¹Ÿæ˜¯åŒ…æ‹¬æ‰€æœ‰ç±»å‹èŠ‚ç‚¹ï¼ç©ºæ ¼ä¹Ÿç®—ï¼åˆ«ç”¨ï¼

### NodeList æ¥å£ï¼ˆäº†è§£ï¼‰

- `NodeList`å®ä¾‹æ˜¯ä¸€ä¸ªç±»ä¼¼æ•°ç»„ä¸æ˜¯æ•°ç»„çš„å¯¹è±¡ï¼Œå®ƒçš„æˆå‘˜æ˜¯èŠ‚ç‚¹å¯¹è±¡ã€‚é€šè¿‡ä»¥ä¸‹æ–¹æ³•å¯ä»¥å¾—åˆ°`NodeList`å®ä¾‹
  - `Node.childNodes`ï¼šè¯´äº†åˆ«ç”¨ï¼çœçš„æ²¡æ³¨æ„ç©ºæ ¼ï¼
  - `document.querySelectorAll()`ç­‰èŠ‚ç‚¹æœç´¢æ–¹æ³•
- å±æ€§ï¼š
  - `length`ï¼ŒNodeList å®ä¾‹åŒ…å«çš„èŠ‚ç‚¹æ•°é‡
- æ–¹æ³•ï¼š
  - `forEach`ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ for å¾ªç¯ã€‚æ²¡ popã€pust ç­‰æ–¹æ³•å“¦ï¼
  - `item(index)`ï¼šæ¥å—ä¸€ä¸ªæ•´æ•°å€¼ä½œä¸ºå‚æ•°ï¼Œè¡¨ç¤ºæˆå‘˜çš„ä½ç½®ï¼Œè¿”å›è¯¥ä½ç½®ä¸Šçš„æˆå‘˜ã€‚
- ã€‚ã€‚ã€‚æ‡’å¾—çœ‹äº†

### HTMLCollection æ¥å£ï¼ˆäº†è§£ï¼‰

- `HTMLCollection`æ˜¯ä¸€ä¸ªèŠ‚ç‚¹å¯¹è±¡çš„é›†åˆï¼Œåªèƒ½åŒ…å«å…ƒç´ èŠ‚ç‚¹ï¼ˆelementï¼‰ï¼Œä¸èƒ½åŒ…å«å…¶ä»–ç±»å‹çš„èŠ‚ç‚¹ã€‚å®ƒçš„è¿”å›å€¼æ˜¯ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œä½†æ˜¯ä¸`NodeList`æ¥å£ä¸åŒï¼Œ`HTMLCollection`æ²¡æœ‰`forEach`æ–¹æ³•ï¼Œåªèƒ½ä½¿ç”¨`for`å¾ªç¯éå†
- è¿”å›`HTMLCollection`å®ä¾‹çš„ï¼Œä¸»è¦æ˜¯ä¸€äº›`Document`å¯¹è±¡çš„é›†åˆå±æ€§ï¼Œæ¯”å¦‚`document.links`ã€`docuement.forms`ã€`document.images`ã€`document.styleSheets`ã€`document.scripts`ç­‰
- `HTMLCollection`å®ä¾‹éƒ½æ˜¯åŠ¨æ€é›†åˆï¼ŒèŠ‚ç‚¹çš„å˜åŒ–ä¼šå®æ—¶åæ˜ åœ¨é›†åˆä¸­
- å±æ€§
  - `length`ï¼šè¿”å›`HTMLCollection`å®ä¾‹åŒ…å«çš„æˆå‘˜æ•°é‡
- æ–¹æ³•
  - `item()`ï¼šæ¥å—ä¸€ä¸ªæ•´æ•°å€¼ä½œä¸ºå‚æ•°ï¼Œè¡¨ç¤ºæˆå‘˜çš„ä½ç½®ï¼Œè¿”å›è¯¥ä½ç½®ä¸Šçš„æˆå‘˜
  - `namedItem()`ï¼šå‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤º`id`å±æ€§æˆ–`name`å±æ€§çš„å€¼ï¼Œè¿”å›å¯¹åº”çš„å…ƒç´ èŠ‚ç‚¹ã€‚å¦‚æœæ²¡æœ‰åˆ™è¿”å›`null`

### ParentNode æ¥å£ï¼ˆæ³¨æ„ IE åŸºæœ¬ä¸æ”¯æŒï¼‰

- åªæœ‰å…ƒç´ èŠ‚ç‚¹ï¼ˆelementï¼‰ã€æ–‡æ¡£èŠ‚ç‚¹ï¼ˆdocumentï¼‰å’Œæ–‡æ¡£ç‰‡æ®µèŠ‚ç‚¹ï¼ˆdocumentFragmentï¼‰æ‹¥æœ‰å­èŠ‚ç‚¹ï¼Œå› æ­¤åªæœ‰è¿™ä¸‰ç±»èŠ‚ç‚¹ä¼šç»§æ‰¿`ParentNode`æ¥å£
- å±æ€§
  - `children`ï¼šè¿”å›ä¸€ä¸ª`HTMLCollection`å®ä¾‹ï¼Œæˆå‘˜æ˜¯å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰**å…ƒç´ å­èŠ‚ç‚¹**ã€‚è¯¥å±æ€§åªè¯»ã€‚
  - `firstElementChild`ï¼šå½“å‰èŠ‚ç‚¹çš„ç¬¬ä¸€ä¸ªå…ƒç´ å­èŠ‚ç‚¹ã€‚å¦‚æœæ²¡æœ‰ä»»ä½•å…ƒç´ å­èŠ‚ç‚¹ï¼Œåˆ™è¿”å›`null`
  - `lastElementChild`ï¼šå½“å‰èŠ‚ç‚¹çš„æœ€åä¸€ä¸ªå…ƒç´ å­èŠ‚ç‚¹ï¼Œå¦‚æœä¸å­˜åœ¨ä»»ä½•å…ƒç´ å­èŠ‚ç‚¹ï¼Œåˆ™è¿”å›`null`
  - `childElementCount`ï¼šè¿”å›ä¸€ä¸ªæ•´æ•°è¡¨ç¤ºå½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å…ƒç´ å­èŠ‚ç‚¹çš„æ•°ç›®ã€‚å¦‚æœä¸åŒ…å«ä»»ä½•å…ƒç´ å­èŠ‚ç‚¹åˆ™è¿”å›`0`
- ==æ–¹æ³•ï¼ˆå¦‚ä¸‹æ–¹æ³•éƒ½æ²¡æœ‰è¿”å›å€¼ï¼‰==
  - **`append()`**ï¼šä¸ºå½“å‰èŠ‚ç‚¹çš„æœ€åä¸€ä¸ªå…ƒç´ å­èŠ‚ç‚¹åè¿½åŠ **ä¸€ä¸ªæˆ–å¤šä¸ªå­èŠ‚ç‚¹**ã€‚å¯ä»¥æ·»åŠ å…ƒç´ å­èŠ‚ç‚¹ã€æ–‡æœ¬å­èŠ‚ç‚¹ã€‚**IE å…¨ä¸æ”¯æŒ**ï¼ï¼ï¼
  - **`prepend()`**ï¼šä¸ºå½“å‰èŠ‚ç‚¹çš„çš„ç¬¬ä¸€ä¸ªå…ƒç´ å­èŠ‚ç‚¹å‰è¿½åŠ **ä¸€ä¸ªæˆ–å¤šä¸ªå­èŠ‚ç‚¹**ã€‚åŒ append()æ–¹æ³•
    - è‹¥æ˜¯è‹¥`newNode`ä¸º DOM ä¸­å·²å­˜åœ¨çš„ï¼Œç›¸å½“äº**å‰ªè´´**

### ChildNode æ¥å£

- å¦‚æœä¸€ä¸ªèŠ‚ç‚¹æœ‰çˆ¶èŠ‚ç‚¹ï¼Œé‚£ä¹ˆè¯¥èŠ‚ç‚¹å°±ç»§æ‰¿äº†`ChildNode`æ¥å£
- ==æ–¹æ³•ï¼ˆéƒ½æ˜¯æœ¬èŠ‚ç‚¹è°ƒç”¨æ–¹æ³•ï¼‰==
  - `remove()`ï¼š==ç”¨äºä»çˆ¶èŠ‚ç‚¹**ç§»é™¤å½“å‰èŠ‚ç‚¹**ï¼Œ**è‡ªå·±è°ƒç”¨åˆ é™¤è‡ªå·±**ï¼å› ä¸ºå·²çŸ¥æœ¬èŠ‚ç‚¹æœ‰çˆ¶èŠ‚ç‚¹==
  - `before()`ï¼šå½“å‰èŠ‚ç‚¹çš„**å‰**é¢ï¼Œæ’å…¥**ä¸€ä¸ªæˆ–å¤šä¸ª**åŒçº§èŠ‚ç‚¹ï¼Œä¸¤è€…æ‹¥æœ‰ç›¸åŒçš„çˆ¶èŠ‚ç‚¹ã€‚å¯ä»¥æ’å…¥å…ƒç´ èŠ‚ç‚¹ã€æ–‡æœ¬èŠ‚ç‚¹
  - `after()`ï¼šåœ¨å½“å‰èŠ‚ç‚¹çš„**å**é¢ï¼Œæ’å…¥**ä¸€ä¸ªæˆ–å¤šä¸ª**åŒçº§èŠ‚ç‚¹ï¼Œä¸¤è€…æ‹¥æœ‰ç›¸åŒçš„çˆ¶èŠ‚ç‚¹ã€‚åŒ before()æ–¹æ³•
  - `replaceWith()`ï¼šä½¿ç”¨å‚æ•°èŠ‚ç‚¹ï¼Œ**æ›¿æ¢**å½“å‰èŠ‚ç‚¹ã€‚å‚æ•°å¯ä»¥æ˜¯å…ƒç´ èŠ‚ç‚¹ï¼Œä¹Ÿå¯ä»¥æ˜¯æ–‡æœ¬èŠ‚ç‚¹

## Document ğŸ”¥

### ç®€ä»‹

åœ¨ HTML DOM æ¨¡å‹ä¸­æœ‰å®¿ä¸»å¯¹è±¡`document`ï¼Œå®ƒæ˜¯`window`å¯¹è±¡çš„å±æ€§ï¼ˆä¹Ÿå¯ä»¥çœç•¥ï¼‰ã€‚

**ç»§æ‰¿äº† Nodeã€ParentNode ç­‰æ¥å£**

### å¸¸ç”¨å±æ€§ï¼ˆå¥½åƒä¸å¤ªå¸¸ç”¨ï¼‰

- `body`

  è¯¥å±æ€§å°è£…çš„æ˜¯ body å…ƒç´ å¯¹è±¡çš„å¼•ç”¨

- `documentElement`

  å±æ€§å€¼ä¸º HTML å…ƒç´ å¯¹è±¡

- `all`

  å±æ€§å€¼ä¸ºå½“å‰é¡µé¢ä¸­çš„æ‰€æœ‰å…ƒç´ èŠ‚ç‚¹çš„æ•°ç»„ã€‚è¿™ä¸ªå±æ€§å€¼æœ¬èº«ä¸º`undefined`ï¼Œå®ƒçš„`typeof`å€¼ä¹Ÿä¸º`undefined`

- `URL`

  è·å–å½“å‰é¡µé¢çš„ url

- `domain`

  è·å–å½“å‰é¡µé¢çš„åŸŸåéƒ¨åˆ†

- `referrer`

  è·å–æ˜¯å“ªä¸ªé¡µé¢é“¾æ¥è·³è½¬åˆ°å½“å‰é¡µé¢ï¼Œæ²¡æœ‰åˆ™è¿”å›ç©ºå­—ç¬¦ä¸²

### å¸¸ç”¨ CRUD æ–¹æ³• ğŸ”¥

#### è·å– Element å¯¹è±¡

::: tip æ³¨æ„

å¯ä»¥ä½¿ç”¨`Document`å¯¹è±¡å’Œ`Element`å¯¹è±¡è°ƒç”¨å¦‚ä¸‹å‡½æ•°ã€‚ä½†æ˜¯`~ById()`å‡½æ•°åªèƒ½ç”¨åœ¨`Document`å¯¹è±¡ä¸Š

:::

::: danger æ³¨æ„

å¦‚ä¸‹æ–¹æ³•éƒ½æ”¯æŒ IE8 åŠä»¥ä¸Š

:::

- `querySelector()`ï¼šCSS é€‰æ‹©å™¨ä¸ºå‚æ•°ï¼Œå¦‚æœæœ‰å¤šä¸ªèŠ‚ç‚¹æ»¡è¶³åŒ¹é…æ¡ä»¶ï¼Œåˆ™è¿”å›**ç¬¬ä¸€ä¸ªåŒ¹é…çš„èŠ‚ç‚¹**ï¼Œæ²¡æœ‰åˆ™è¿”å› null

- `querySelectorAll()`ï¼šè¿”å›ä¸€ä¸ª`NodeList`å¯¹è±¡ï¼ŒåŒ…å«**æ‰€æœ‰åŒ¹é…ç»™å®šé€‰æ‹©å™¨çš„èŠ‚ç‚¹**ã€‚ç”¨æ³•åŒä¸Š

  ã€æ³¨æ„ã€‘ä¸æ”¯æŒ CSS ä¼ªå…ƒç´ é€‰æ‹©å™¨å’Œä¼ªç±»é€‰æ‹©å™¨

- `getElementById("id")`ï¼šæ ¹æ® ID å±æ€§è·å–ä¸€ä¸ª**å…ƒç´ å¯¹è±¡**ï¼Œæ•ˆç‡æ¯”`querySelector()`é«˜

- `getElementsByClassName("className")`ï¼šæ ‡ç­¾çš„ class çš„å±æ€§å€¼å¾—åˆ°å…ƒç´ **é›†åˆ**ï¼ˆ`HTMLCollection`å®ä¾‹ï¼‰

- `getElementsByTagName("tagName")`ï¼šæ ‡ç­¾åç§°å¾—åˆ°å…ƒç´ **é›†åˆ**ï¼ˆ`HTMLCollection`å®ä¾‹ï¼‰

- `getElementsByName("name")`ï¼šæ ‡ç­¾çš„ name å±æ€§å€¼å¾—åˆ°å…ƒç´ **é›†åˆ**ï¼ˆ`NodeList`å®ä¾‹ï¼‰ï¼Œradioã€checkBox ç­‰

  åªæœ‰ä¸€ä¸ªæ ‡ç­¾æ—¶é€šè¿‡`document.getElementsByTag/ClassName("input")[0]`è·å–å…ƒç´ å¯¹è±¡

  **è·å–æ ‡ç­¾ä¸‹é¢çš„å­å­™æ ‡ç­¾**çš„å”¯ä¸€æœ‰æ•ˆåŠæ³•ï¼Œä½¿ç”¨çˆ¶èŠ‚ç‚¹**`getElementsByTagName()`**æ–¹æ³•ï¼Œä¸ä½¿ç”¨ childNodes å±æ€§

#### æ·»åŠ  DOM å¯¹è±¡

- `createElement("å…ƒç´ åç§°")`ï¼šåˆ›å»º**å…ƒç´ èŠ‚ç‚¹**ï¼Œå‚æ•°ä¸º tagName å±æ€§ï¼Œå¯¹ HTML ä¸åŒºåˆ†å¤§å°å†™ï¼Œä½†ä¸èƒ½åŠ å°–æ‹¬å·
- `createTextNode("æ–‡æœ¬å†…å®¹")`ï¼šåˆ›å»º**æ–‡æœ¬èŠ‚ç‚¹**ï¼Œå¯ä»¥åœ¨å†…å®¹ä¸­æ·»åŠ æ ‡ç­¾ã€‚ä¸èƒ½å¯¹å±æ€§èµ‹å€¼ï¼Œä¸ä¼šè½¬ä¹‰å•åŒå¼•
- `createAttribute(name)`ï¼šåˆ›å»ºæ‹¥æœ‰æŒ‡å®šåç§°çš„å±æ€§èŠ‚ç‚¹ï¼Œå¹¶è¿”å›æ–°çš„ Attr å¯¹è±¡ã€‚é€šè¿‡ Node æ¥è®¾ç½®å±æ€§
- `createComment()`ï¼šåˆ›å»ºæ³¨é‡ŠèŠ‚ç‚¹

#### å…¶ä»–

- **write**()ï¼šå‘é¡µé¢è¾“å‡ºå˜é‡ï¼ˆå€¼ï¼‰ã€html ä»£ç 

## Element ğŸ”¥

é€šè¿‡`document`æ¥è·å–å’Œåˆ›å»º

### å¸¸ç”¨å±æ€§

- `innerHTML`ï¼šè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç­‰åŒäº**è¯¥å…ƒç´ åŒ…å«çš„æ‰€æœ‰ HTML ä»£ç **ï¼Œè¯¥å±æ€§**å¯è¯»å†™**ã€‚ç”¨æ¥è®¾ç½®æŸä¸ªèŠ‚ç‚¹çš„å†…å®¹

- `innerText`ï¼šåŒä¸Šï¼Œä½†æ˜¯åªæ˜¾ç¤ºæ–‡æœ¬ä»£ç ï¼Œä¸å¸¦æ ‡ç­¾çš„ï¼ï¼ï¼Œè®¾ç½®å†…å®¹ä¹Ÿä¸ä¼šè§£æä¸º HTML

- `textContent`ï¼šæ˜¾ç¤ºæ–‡æœ¬æˆ–æ’å…¥çš„æ˜¯æ–‡æœ¬æ—¶ä½¿ç”¨æ¥æ›¿ä»£ä¸Šé¢æ–¹æ³•ã€‚åŸæ ·æ˜¾ç¤ºï¼Œä¸åƒä¸Šé¢æ–¹æ³•ä¼šè½¬ä¸º`&**;`æ¥æ˜¾ç¤º

- `value`ï¼šä»£è¡¨çš„æ˜¯å…ƒç´ çš„ value å±æ€§ï¼Œä¸€èˆ¬ç”¨äº**`input`æ ‡ç­¾å€¼çš„è·å–**ï¼Œ**`select`**æ ‡ç­¾å€¼ä¹Ÿå¯ä»¥ä½¿ç”¨

- `style`ï¼šç”¨æ¥è¯»å†™è¯¥å…ƒç´ çš„è¡Œå†…æ ·å¼ä¿¡æ¯ï¼Œé…åˆ CSSã€‚å¦‚ display å¯å–å€¼ noneã€blockã€inner

  ä¹Ÿå¯ä»¥**æå‰å®šä¹‰å¥½**ç±»é€‰æ‹©å™¨çš„æ ·å¼ï¼Œé€šè¿‡å…ƒç´ çš„`className`å±æ€§æ¥è®¾ç½®å…¶`class`å±æ€§å€¼ã€‚

### å¸¸ç”¨ Attribute æ–¹æ³•

- `getAttribute("name")`ï¼šè·å–å±æ€§é‡Œé¢çš„å€¼
- `setAttribute("name","value")`ï¼šè®¾ç½®å±æ€§çš„å€¼
- `removeAttribute("name")`ï¼šåˆ é™¤å±æ€§ï¼Œ**ä¸èƒ½åˆ é™¤ value å±æ€§**

## Event

### åŠ è½½äº‹ä»¶

- `onload`

  **æ–‡æ¡£è¢«æµè§ˆå™¨**åŠ è½½**æ—¶è§¦å‘ï¼Œ**åªèƒ½å†™ä¸€æ¬¡**ï¼›ä¸€èˆ¬åœ¨ body æ ‡ç­¾ä¸­æ³¨å†Œå‡½æ•°ï¼›æˆ–ç”¨ window æ¥è°ƒç”¨ã€‚æ­¤æ—¶**å¯ä»¥æ“ä½œ DOM å…ƒç´ \*\*ã€‚

  ```javascript
  window.onload = function() {
    document.getElementById('btn').onclick = function() {
      alert('haha')
    }
  }
  ```

### ç‚¹å‡»äº‹ä»¶

- **`onclick`**ï¼šç‚¹å‡»äº‹ä»¶(æŒ‰é’®)
- **`ondblclick`**ï¼šåŒå‡»äº‹ä»¶

### ç„¦ç‚¹äº‹ä»¶(è¡¨å•æ ¡éªŒ)

- **`onfocus`**ï¼šç»„ä»¶è·å¾—ç„¦ç‚¹äº‹ä»¶(è¾“å…¥æ¡†/å•é€‰/å¤šé€‰/ä¸‹æ‹‰) ï¼Œå…‰æ ‡é—ªåŠ¨
- **`onblur`**ï¼šç»„ä»¶å¤±å»ç„¦ç‚¹äº‹ä»¶(è¾“å…¥æ¡†/å•é€‰/å¤šé€‰/ä¸‹æ‹‰)

### æ”¹å˜äº‹ä»¶

- **`onchange`ï¼šåŸŸçš„å†…å®¹æ”¹å˜**/é€‰æ‹©çš„å€¼å‘ç”Ÿå˜åŒ–äº‹ä»¶(è¾“å…¥æ¡†/ä¸‹æ‹‰)
- **`onselect`**ï¼šæ–‡æœ¬è¢«é€‰ä¸­

### è¡¨å•äº‹ä»¶

- **`onsubmit`**ï¼šè¡¨å•æäº¤æŒ‰é’®æŒ‰ä¸‹æ—¶è§¦å‘çš„äº‹ä»¶(**è¡¨å•æ ¡éªŒ**)**åœ¨ form åæ³¨å†Œå‡½æ•°ï¼Œæœ‰è¿”å›å€¼ true/false**ï¼Œæ§åˆ¶æäº¤ä¸å¦

  å¿…é¡»å†™`return å‡½æ•°å`å¦åˆ™ä¸èƒ½è·å–åˆ°è¿”å›çš„ boolean å€¼

- **`onreset`**ï¼šé‡ç½®æŒ‰é’®æŒ‰ä¸‹æ—¶

### é¼ æ ‡äº‹ä»¶

- **`onmouseover()`**ï¼šé¼ æ ‡ç§»åŠ¨åˆ°ç»„ä»¶ä¸Šæ—¶è§¦å‘

- **`onmouseout`**ï¼šé¼ æ ‡ç§»å‡ºç»„ä»¶æ—¶è§¦å‘

- **`onmousemove`**ï¼šé¼ æ ‡ç§»åŠ¨å°±è§¦å‘

- **`onmousedown`**ï¼šé¼ æ ‡æŒ‰é”®æŒ‰ä¸‹æ—¶è§¦å‘

  å®šä¹‰æ–¹æ³•æ—¶ï¼Œå®šä¹‰ä¸€ä¸ªå½¢å‚æ¥æ¥æ”¶`event`å¯¹è±¡ï¼Œå®ƒçš„`button`å±æ€§å¯ä»¥è·å–é¼ æ ‡å“ªä¸ªæŒ‰é’®è¢«ç‚¹å‡»(0ï¼Œ1ï¼Œ2)

- **`onmouseup`**ï¼šé¼ æ ‡æŒ‰é”®æ¾å¼€æ—¶è§¦å‘

### é”®ç›˜äº‹ä»¶

- `onkeydown`ï¼šæŸä¸ªé”®ç›˜æŒ‰é”®è¢«æŒ‰ä¸‹
- `onkeyup`ï¼šæŸä¸ªé”®ç›˜æŒ‰é”®è¢«æ¾å¼€
- `onkeypress`ï¼šæŸä¸ªé”®ç›˜æŒ‰é”®è¢«æŒ‰ä¸‹å¹¶æ¾å¼€

## æ¡ˆä¾‹

### åŠ¨æ€æ˜¾ç¤ºæ—¶é—´

```javascript
let ele = document.getElementById('h1')
function setTime() {
  let s = new Date().toLocaleString()
  ele.innerText = s
}
setInterval(setTime, 1000)
```

### è½®æ’­å›¾(æ­£å¸¸ä¸è¿™ä¹ˆåš)

```javascript
var i = 1
function changeImg() {
  i++
  if (i > 3) i = 1
  document.getElementById('img1').src = 'img/' + i + '.jpg'
}
setInterval(changeImg, 5000)
```

### å®šæ—¶å¼¹å‡ºå¹¿å‘Š(style.display)

```javascript
showTime = setTimeout(showAd, 3000) //å®šä¹‰ä¸ºå…¨å±€å˜é‡

function showAd() {
  document.getElementById('adImg').style.display = 'block'
  clearTimeout(showTime)
  hiddenTime = setTimeout(hiddenAd, 3000)
}

function hiddenAd() {
  document.getElementById('adImg').style.display = 'none'
  clearTimeout(hiddenTime)
}
```

### åŠ¨æ€å¢åˆ è¡¨æ ¼

```javascript
document.getElementById('btn').onclick = function() {
  let id = document.getElementById('id').value
  let name = document.getElementById('name').value
  let sex = document.getElementById('sex').value
  //thead
  let tbd = document.getElementsByTagName('thead')[0]

  document.getElementById('btn').onclick = function() {
    let id = document.getElementById('id').value
    let name = document.getElementById('name').value
    let sex = document.getElementById('sex').value

    let thd = document.getElementsByTagName('thead')[0]

    thd.innerHTML +=
      '<tr>\n' +
      '        <td>' +
      id +
      '</td>\n' +
      '        <td>' +
      name +
      '</td>\n' +
      '        <td>' +
      sex +
      '</td>\n' +
      '        <td><a href="javascript:void(0);" onclick="delTr(this);" >åˆ é™¤</a></td>\n' +
      '    </tr>'
    //ä½¿ç”¨æ–¹æ³•ä¸€ä¸ªä¸ªæ·»åŠ ä¹Ÿè¡Œï¼Œä½†æ˜¯éº»çƒ¦
  }
  function delTr(obj) {
    var parentNode = obj.parentNode.parentNode.parentNode
    var deleteNode = obj.parentNode.parentNode
    parentNode.removeChild(deleteNode)
  }
}
```

### å…¨é€‰/å…¨ä¸é€‰/åé€‰/é«˜äº®

```javascript
let inputs = document.getElementsByClassName('check-box')
//å…¨é€‰
document.getElementById('selectAll').onclick = function() {
  for (let i in inputs) {
    inputs[i].checked = true
  }
}
//å…¨ä¸é€‰
document.getElementById('notSelect').onclick = function() {
  for (let i in inputs) {
    inputs[i].checked = false
  }
}
//åé€‰
document.getElementById('reverseSelect').onclick = function() {
  for (let i in inputs) {
    inputs[i].checked = !inputs[i].checked
  }
}
//å·¦ä¸Šè§’é€‰æ‹©
document.getElementById('ck1').onclick = function() {
  for (let i in inputs) {
    inputs[i].checked = this.checked
  }
}
//è¡¨æ ¼è¡Œé«˜äº®
let trs = document.getElementsByTagName('tr')
for (let t in trs) {
  trs[t].onmouseover = function() {
    this.style.backgroundColor = 'gray'
  }
  trs[t].onmouseout = function() {
    this.style.backgroundColor = 'white'
  }
}
```

### è¡¨å•æ ¡éªŒ

```javascript
window.onload = function () {
    //è¡¨å•æ ¡éªŒ
    document.getElementById("form").onsubmit = function () {
        return checkUsername();//å¯æ·»åŠ å¯†ç æ ¡éªŒ
    }
    document.getElementById("username").onblur = checkUsername;//å¯æ·»åŠ å¯†ç æ ¡éªŒ

}
//ç”¨æˆ·åæ ¡éªŒ
function checkUsername() {
    var username = document.getElementById("username").value;
    var reg = /^\w{6,12}$/;
    let flag = reg.test(username);
    if (flag) {
        document.getElementById("usernameSpan").innerHTML = "âœ”";
    } else {
        document.getElementById("usernameSpan").innerHTML = "ç”¨æˆ·åæ ¼å¼æœ‰è¯¯";
    }
    return flag;
}
//å¯æ·»åŠ å¯†ç æ ¡éªŒç­‰ç­‰
ã€‚ã€‚ã€‚ã€‚ã€‚
```

### å·¦å³åˆ—è¡¨

- selectã€optionã€multipleã€selected=true/falseã€appendChild()å‰ªè´´çš„ length å˜åŒ–

```javascript
var left = document.getElementById('left')
var leftlist = left.getElementsByTagName('option')
var right = document.getElementById('right')
var rightlist = right.getElementsByTagName('option')

var toRight = function() {
  for (let i = 0; i < leftlist.length; i++) {
    if (leftlist[i].selected) {
      right.appendChild(leftlist[i])
      i--
    }
  }
}
var allToRight = function() {
  for (let i = 0; i < leftlist.length; i++) {
    right.appendChild(leftlist[i])
    i--
  }
}
```

### è¡¨æ ¼éš”è¡Œæ¢è‰²(tBodiesã€rows)

```javascript
//è¿™æ ·ä¹Ÿå¯ä»¥è·å¾—è¡Œæ•°
//var tbody = document.getElementsByTagName("tbody")[0];
//var rows = tbody.getElementsByTagName("tr").length;

var tb = document.getElementById('table1')
var rows = tb.tBodies[0].rows.length
for (let i = 0; i < rows; i++) {
  if (i % 2 === 0) {
    tb.tBodies[0].rows[i].style.backgroundColor = 'gray'
  } else {
    tb.tBodies[0].rows[i].style.backgroundColor = 'yellow'
  }
}
```

### çœå¸‚è”åŠ¨(this.value)

```javascript
let arr = [
  ['é™•è¥¿', 'è¥¿å®‰', 'å•†æ´›', 'å»¶å®‰', 'å®‰åº·'],
  ['æ²³åŒ—', 'çŸ³å®¶åº„', 'å»ŠåŠ', 'ç§¦çš‡å²›', 'é›„å®‰'],
  ['å¹¿ä¸œ', 'æ·±åœ³', 'ç æµ·', 'å¹¿å·', 'ä¸çŸ¥é“'],
]

document.getElementById('sheng').onchange = function() {
  let option = document.getElementById('shi') //ä¸èƒ½ç›´æ¥ä½¿ç”¨innerHTMLæ¥èµ‹å€¼
  option.innerHTML = '' //æ¯æ¬¡æ”¹å˜æ—¶è¦æ¸…ç©º
  for (let i in arr) {
    if (arr[i][0] === this.value) {
      for (let j = 1; j < arr[i].length; j++) {
        option.innerHTML += '<option>' + arr[i][j] + '</option>'
      }
    }
  }
}
```

## DOM æ“ä½œ ğŸ”¥

### è¡¨å•å€¼è·å– ğŸ”¥

::: demo [vanilla]

```html
<html>
  <div id="radio">
    <h2>radioå€¼è·å–</h2>
    <div>
      <input type="radio" value="0" name="radioStatus" checked="checked" />å¥½è¯„
      <input type="radio" value="1" name="radioStatus" />å·®è¯„

      <button id="getRadioStatus">getRadioStatus</button>
    </div>
  </div>

  <div id="checkbox">
    <h2>checkboxå€¼è·å–</h2>
    <div>
      <input type="checkbox" value="0" name="checkboxStatus" checked />å”±
      <input type="checkbox" value="1" name="checkboxStatus" />è·³
      <input type="checkbox" value="2" name="checkboxStatus" />rap
      <input type="checkbox" value="3" name="checkboxStatus" />ç¯®çƒ

      <button id="getCheckboxStatus">getCheckboxStatus</button>
    </div>
  </div>

  <div id="select">
    <h2>selectå€¼è·å–</h2>
    <div>
      <select name="selectStatus" id="selectStatus">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
      </select>

      <button id="getSelectStatus">getSelectStatus</button>
    </div>
  </div>
</html>
<script>
  const getRadioStatus = document.getElementById('getRadioStatus')
  getRadioStatus.addEventListener('click', function() {
    // $('input:radio[name="status"]:checked').val()// jQueryæ–¹å¼ï¼Œé™¤äº†:radioå¤–å…¶å®æ˜¯CSSé€‰æ‹©å™¨
    const test = document.querySelector('input[name="radioStatus"]:checked') //CSSé€‰æ‹©å™¨ï¼Œtype=radioä¸€èˆ¬å‘½åè§„èŒƒæ—¶å¯ä»¥çœç•¥
    console.log(test.value)
  })

  const getCheckboxStatus = document.getElementById('getCheckboxStatus')
  getCheckboxStatus.addEventListener('click', function() {
    // $('input:checkbox').each(function() {
    //     if ($(this).attr('checked') ==true) {
    //         alert($(this).val());
    //     }
    // });
    let nodeList = document.querySelectorAll(
      'input[name="checkboxStatus"]:checked'
    )
    console.log(nodeList) // NodeList æ˜¯å¯¹è±¡ï¼Œä¸æ˜¯æ•°ç»„ï¼Œæ— æ³•ä½¿ç”¨ .map æµ
    nodeList.forEach((item) => console.log(item.value))
  })

  const getSelectStatus = document.getElementById('getSelectStatus')
  getSelectStatus.addEventListener('click', function() {
    // $('select[name="selectStatus"]).val()// jQueryï¼Œå°±æ˜¯CSSé€‰æ‹©å™¨ï¼Œç›´æ¥ä½¿ç”¨ #id ä¹Ÿå¯ä»¥ï¼ï¼ï¼
    const select = document.querySelector('select[name="selectStatus"]') //CSSé€‰æ‹©å™¨ï¼Œç›´æ¥ä½¿ç”¨ #id ä¹Ÿå¯ä»¥ï¼ï¼ï¼
    console.log(select.value)

    const index = select.selectedIndex // ç´¢å¼•ï¼Œä»0å¼€å§‹
    const value = select.options[index].value //è¦çš„å€¼
  })
</script>
```

:::

### åŠ¨æ€å¢åˆ è¡¨å•

::: demo [vanilla]

```html
<html>
  <button id="add">add dom</button>
  <div id="container"></div>
</html>
<script>
  const add = document.getElementById('add')
  add.addEventListener('click', function() {
    const container = document.getElementById('container')

    const id = Date.now()
    const div = document.createElement('div')
    div.setAttribute('id', id)

    const input = document.createElement('input')
    input.setAttribute('type', 'text')
    div.appendChild(input)

    const button = document.createElement('button')
    button.innerText = 'del dom'
    div.appendChild(button)

    button.addEventListener('click', function() {
      const delEl = document.getElementById(id)
      delEl.remove() // IEå…¨ä¸æ”¯æŒ
      // delEl.parentNode.removeChild(delEl)// éƒ½æ”¯æŒ
    })

    // innerHTML += ä¼šå¯¼è‡´é‡æ–°æ¸²æŸ“ï¼ï¼ï¼
    // container.innerHTML += html

    container.append(div) // IEå…¨ä¸æ”¯æŒ
    // container.appendChild(div)// éƒ½æ”¯æŒ
  })
</script>
```

:::





### åŠ¨æ€å¢åˆ è¡¨å• & æ‹–åŠ¨ & å•å‡»ç§»åŠ¨

<iframe height="300" style="width: 100%;" scrolling="no" title="DOM crud&amp;drag" src="https://codepen.io/conanan/embed/MWowMeN?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href="https://codepen.io/conanan/pen/MWowMeN">
  DOM crud&amp;drag</a> by apple54whn (<a href="https://codepen.io/conanan">@conanan</a>)
  on <a href="https://codepen.io">CodePen</a>.
</iframe>

