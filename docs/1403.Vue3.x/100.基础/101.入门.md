---
title: å…¥é—¨
date: 2020-12-28 00:14:45
permalink: /pages/347f26/
categories:
  - x
  - åŸºç¡€
tags:
  -
---

# å…¥é—¨

::: tip ä»£ç 

é…å¥—çš„ä»£ç åœ¨ [Github](https://github.com/apple54whn/study-vuejs) ä¸­

:::

## Vue.js æ˜¯ä»€ä¹ˆ

Vue æ˜¯ä¸€å¥—ç”¨äºæ„å»ºç”¨æˆ·**ç•Œé¢**çš„**æ¸è¿›å¼æ¡†æ¶ï¼ˆå¯ä»¥åªç”¨ Vueï¼Œæ ¹æ®åç»­éœ€è¦ä½¿ç”¨å…¶ä»–å¦‚ Routerã€Vuex ç­‰ï¼‰**ã€‚

ä¸å…¶å®ƒå¤§å‹æ¡†æ¶ä¸åŒçš„æ˜¯ï¼ŒVue è¢«è®¾è®¡ä¸ºå¯ä»¥**è‡ªåº•å‘ä¸Šé€å±‚åº”ç”¨**ã€‚Vue çš„æ ¸å¿ƒåº“åª**å…³æ³¨è§†å›¾å±‚**ï¼Œä¸ä»…æ˜“äºä¸Šæ‰‹ï¼Œè¿˜ä¾¿äºä¸ç¬¬ä¸‰æ–¹åº“æˆ–æ—¢æœ‰é¡¹ç›®æ•´åˆã€‚å¦ä¸€æ–¹é¢ï¼Œå½“ä¸ç°ä»£åŒ–çš„å·¥å…·é“¾ä»¥åŠå„ç§æ”¯æŒç±»åº“ç»“åˆä½¿ç”¨æ—¶ï¼ŒVue ä¹Ÿå®Œå…¨èƒ½å¤Ÿä¸ºå¤æ‚çš„å•é¡µåº”ç”¨æä¾›é©±åŠ¨ã€‚

ç‰¹ç‚¹å¦‚ä¸‹ï¼š

- è§£è€¦è§†å›¾å’Œæ•°æ®
- å¯å¤ç”¨çš„ç»„ä»¶
- å‰ç«¯è·¯ç”±
- çŠ¶æ€ç®¡ç†
- è™šæ‹Ÿ DOM

## å®‰è£…

å®˜æ–¹çš„[å®‰è£…æ–‡æ¡£](https://www.vue3js.cn/docs/zh/guide/installation.html)

### CDN

å¯¹äº**åˆ¶ä½œåŸå‹æˆ–å­¦ä¹ **ï¼Œä½ å¯ä»¥è¿™æ ·ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬

```html
<script src="https://unpkg.com/vue@next"></script>
```

å¯¹äºç”Ÿäº§ç¯å¢ƒï¼Œæˆ‘ä»¬æ¨èé“¾æ¥åˆ°ä¸€ä¸ª**æ˜ç¡®çš„ç‰ˆæœ¬å·å’Œæ„å»ºæ–‡ä»¶**ï¼Œä»¥é¿å…æ–°ç‰ˆæœ¬é€ æˆçš„ä¸å¯é¢„æœŸçš„ç ´å



### npm



### CLI



### Vite



### å¯¹ä¸åŒæ„å»ºç‰ˆæœ¬çš„è§£é‡Š

åœ¨ [npm åŒ…çš„ dist/ ç›®å½•](https://cdn.jsdelivr.net/npm/vue@3.0.0-rc.1/dist/)ä½ å°†ä¼šæ‰¾åˆ°å¾ˆå¤šä¸åŒçš„ Vue.js æ„å»ºç‰ˆæœ¬ã€‚è¿™é‡Œåˆ—å‡ºäº†å®ƒä»¬ä¹‹é—´çš„å·®åˆ«ï¼š

![image-20201228002650679](../images/image-20201228002650679.png)

å…·ä½“è§[æ–‡æ¡£](https://www.vue3js.cn/docs/zh/guide/installation.html#%E5%AF%B9%E4%B8%8D%E5%90%8C%E6%9E%84%E5%BB%BA%E7%89%88%E6%9C%AC%E7%9A%84%E8%A7%A3%E9%87%8A)







## è®¡æ•°å™¨

å¯ä»¥å°† template ä¸­å†…å®¹å†™åˆ° html ä¸­ï¼ŒVue2 çš„ el å·²è¢« mount() æ›¿ä»£ï¼š

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hello World</title>
    <script src="https://unpkg.com/vue@next"></script>
  </head>
  <body>
    <div id="app">
      <button @click="decrement">-</button>
      <span>{{counter}}</span>
      <button @click="increment">+</button>
    </div>

    <script>
      const options = {
        // templateä¸­å†™ä¹ˆæœ‰æç¤ºï¼Œä¸æ–¹ä¾¿
        // template: `<div></div>`,
        data() {
          return {
            counter: 0,
          }
        },
        methods: {
          decrement() {
            this.counter--
          },
          increment() {
            this.counter++
          },
        },
      }

      // // Vue.createApp åˆ›å»º Vue åº”ç”¨
      // const app = Vue.createApp(options);
      // // mount è£…è½½åˆ°å“ªé‡Œï¼Œå³åœ¨ id = root çš„ html ä¸­ä½¿ç”¨ vue
      // const vm = app.mount('#root');

      // å¯ä»¥é“¾å¼ç¼–ç¨‹ï¼š
      const vm = Vue.createApp(options).mount('#app')
    </script>
  </body>
</html>

```







## Optionsï¼ˆåç»­ä½¿ç”¨ Composition æ›¿æ¢ï¼‰

### template

è¡¨ç¤ºçš„æ˜¯Vueéœ€è¦å¸®åŠ©æˆ‘ä»¬**æ¸²æŸ“çš„æ¨¡æ¿ä¿¡æ¯**ã€‚

*   å®ƒé‡Œé¢æœ‰å¾ˆå¤šçš„HTMLæ ‡ç­¾ï¼Œè¿™äº›æ ‡ç­¾ä¼š**æ›¿æ¢**æ‰æˆ‘ä»¬æŒ‚è½½åˆ°çš„å…ƒç´ ï¼ˆæ¯”å¦‚idä¸ºappçš„divï¼‰çš„innerHTML;
*   æ¨¡æ¿ä¸­æœ‰ä¸€äº›å¥‡æ€ªçš„è¯­æ³•ï¼Œæ¯”å¦‚ {{}}ï¼Œæ¯”å¦‚ @clickï¼Œè¿™äº›éƒ½æ˜¯**æ¨¡æ¿**ç‰¹æœ‰çš„**è¯­æ³•**

è¿™ä¸ªæ¨¡æ¿çš„å†™æ³•æœ‰ç‚¹è¿‡äºåˆ«æ‰­äº†ï¼Œå¹¶ä¸”IDEå¾ˆæœ‰å¯èƒ½æ²¡æœ‰ä»»ä½•æç¤ºï¼Œé˜»ç¢æˆ‘ä»¬ç¼–ç¨‹çš„æ•ˆç‡ã€‚**Vueæä¾›äº†ä¸¤ç§æ–¹å¼ï¼š**

*   ä½¿ç”¨scriptæ ‡ç­¾ï¼Œå¹¶ä¸”æ ‡è®°å®ƒçš„ç±»å‹ä¸º x-templateï¼ˆå’Œlayuié‚£ç§ä¸€æ ·ï¼‰

    ```html
    <script type="x-template" id="temp"></script>
    
    template: '#temp', //
    ```

    æ³¨æ„å’Œ`mount('#app')`ä¸ä¸€æ ·ï¼`template: '#temp'` ä¼šæŠŠå…¶å†…å®¹æ¸²æŸ“åˆ° mount ä¸­ï¼

*   ä½¿ç”¨**ä»»æ„æ ‡ç­¾**ï¼ˆé€šå¸¸ä½¿ç”¨templateæ ‡ç­¾ï¼Œå› ä¸ºä¸ä¼šè¢«æµè§ˆå™¨æ¸²æŸ“ï¼‰ï¼Œè®¾ç½®idã€‚ğŸ”¥

    ```html
    <template id="temp"></template>
    
    template: '#temp', //
    ```

    æ³¨æ„å’Œ`mount('#app')`ä¸ä¸€æ ·ï¼`template: '#temp'`  ä¼šæŠŠå…¶å†…å®¹æ¸²æŸ“åˆ° mount ä¸­ï¼



### data

ä¼ å…¥ä¸€ä¸ª**å‡½æ•°**ï¼Œå¹¶ä¸”è¯¥å‡½æ•°éœ€è¦**è¿”å›ä¸€ä¸ªå¯¹è±¡**

*   åœ¨Vue2.xçš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼ˆè™½ç„¶å®˜æ–¹æ¨èæ˜¯ä¸€ä¸ªå‡½æ•°ï¼‰
*   åœ¨Vue3.xçš„æ—¶å€™ï¼Œå¿…é¡»ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œå¦åˆ™å°±ä¼šç›´æ¥åœ¨æµè§ˆå™¨ä¸­æŠ¥é”™

data ä¸­è¿”å›çš„å¯¹è±¡ä¼šè¢«Vueçš„å“åº”å¼ç³»ç»ŸåŠ«æŒï¼Œä¹‹åå¯¹è¯¥å¯¹è±¡çš„ä¿®æ”¹æˆ–è€…è®¿é—®éƒ½ä¼šåœ¨åŠ«æŒä¸­è¢«å¤„ç†

*   æ‰€ä»¥æˆ‘ä»¬åœ¨templateä¸­é€šè¿‡ {{counter}} è®¿é—®counterï¼Œå¯ä»¥ä»å¯¹è±¡ä¸­è·å–åˆ°æ•°æ®
*   æˆ‘ä»¬ä¿®æ”¹counterçš„å€¼æ—¶ï¼Œtemplateä¸­çš„ {{counter}}ä¹Ÿä¼šå‘ç”Ÿæ”¹å˜;





### methods

**methodså±æ€§**æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé€šå¸¸æˆ‘ä»¬ä¼šåœ¨è¿™ä¸ªå¯¹è±¡ä¸­å®šä¹‰å¾ˆå¤šçš„æ–¹æ³•ï¼š

*   è¿™äº›æ–¹æ³•å¯ä»¥è¢«ç»‘å®šåˆ° template æ¨¡æ¿ä¸­;
*   åœ¨è¯¥æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨thiså…³é”®å­—æ¥ç›´æ¥è®¿é—®åˆ°dataä¸­è¿”å›çš„å¯¹è±¡çš„å±æ€§

æ³¨æ„ï¼š



#### this ç»‘å®šé—®é¢˜ ğŸ”¥

*   methods çš„æ–¹æ³•å®šä¹‰ä¸ºä»€ä¹ˆä¸èƒ½ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼ˆå®˜æ–¹æ–‡æ¡£æœ‰ç»™å‡ºè§£é‡Šï¼‰

*   ä¸ä½¿ç”¨ç®­å¤´å‡½æ•°çš„æƒ…å†µä¸‹ï¼Œthisåˆ°åº•æŒ‡å‘çš„æ˜¯ä»€ä¹ˆ? **æ˜¯ window**

    ç®­å¤´å‡½æ•°ä½¿ç”¨thisçš„æŸ¥æ‰¾è§„åˆ™ï¼Œå®ƒä¼šåœ¨è‡ªå·±çš„**ä¸Šå±‚ä½œç”¨äºä¸­æ¥æŸ¥æ‰¾this**ï¼Œæœ€ç»ˆåˆšå¥½æ‰¾åˆ°çš„æ˜¯scriptä½œç”¨äºä¸­çš„thisï¼Œæ‰€ä»¥å°±æ˜¯window ğŸ”¥ã€‚vueæºç ä¸­ä½¿ç”¨ bind ç»‘å®š publicThis åˆ°æ¯ä¸ª method ä¸Šï¼Œå­˜å…¥ ctx[methos]





## debug æºç 

å¯ä»¥åœ¨ package.json ä¸­çš„ dev é€‰é¡¹åé¢åŠ ä¸Š `--sourcemap`ï¼Œå°±å¯ä»¥åœ¨debugæ—¶çœ‹åˆ°ç‹¬ç«‹çš„æ–‡ä»¶è€Œä¸æ˜¯æ‰“åŒ…åçš„æ–‡ä»¶





## VSCode ä»£ç ç‰‡æ®µ ğŸ”¥

*   ç¬¬ä¸€æ­¥ï¼Œå¤åˆ¶è‡ªå·±éœ€è¦ç”Ÿæˆä»£ç ç‰‡æ®µçš„ä»£ç ;
*   ç¬¬äºŒæ­¥ï¼Œhttps://snippet-generator.app/åœ¨è¯¥ç½‘ç«™ä¸­ç”Ÿæˆä»£ç ç‰‡æ®µ;
*   ç¬¬ä¸‰æ­¥ï¼Œåœ¨VSCodeä¸­é…ç½®ä»£ç ç‰‡æ®µ;





## v-bind ğŸ”¥

*   ä¸€èˆ¬ä½¿ç”¨ï¼š`v-bind:src='src'`æˆ–ç®€å†™`:src='src'`ã€‚åªèƒ½ä¼ é€’å•ç‹¬çš„å€¼
*   åœ¨å°è£…é«˜çº§ç»„ä»¶æ—¶ï¼ˆåº•å±‚æ˜¯å¦‚Elementçš„ç»„ä»¶ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨`v-bind='info'`æ¥ä¼ é€’infoå¯¹è±¡ï¼



## Todo-List åŠç»„ä»¶åˆè¯†

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hello World</title>
  </head>
  <body>
    <div id="root">
      <div>
        <input v-model="item" />
        <button @click="handleAddItem" :title="item">æ·»åŠ </button>
        <ul>
          <li v-for="(item,index) in list">
            <todo-item
              :item="item"
              :index="index"
              @handle-delete-item="handleDeleteItem"
            />
          </li>
        </ul>
      </div>
    </div>

    <!-- ç»„ä»¶æ¨¡ç‰ˆåˆ†ç¦» -->
    <template id="todo-item">
      <span>{{index+1}}</span>
      <span>--</span>
      <span>{{item}}</span>
      <button @click="handleDeleteItem(index)">åˆ é™¤</button>
    </template>

    <script src="https://unpkg.com/vue@next"></script>
    <script>
      let options = {
        data() {
          return {
            item: '',
            list: [],
          }
        },
        methods: {
          handleAddItem() {
            this.list.push(this.item)
            this.item = ''
          },
          handleDeleteItem(index) {
            this.list.splice(index, 1)
          },
        },
      }

      // Vue.createApp åˆ›å»º Vue åº”ç”¨ï¼Œå­˜å‚¨åˆ° app ä¸­
      //ä¼ å…¥çš„å‚æ•°è¡¨ç¤ºï¼Œè¿™ä¸ªåº”ç”¨æœ€å¤–å±‚çš„ç»„ä»¶ï¼Œè¯¥å¦‚ä½•å±•ç¤º
      const app = Vue.createApp(options)

      // ç»„ä»¶
      app.component('todo-item', {
        template: `#todo-item`,
        props: {
          item: {
            type: String,
            default: '',
          },
          index: {
            type: Number,
            default: 0,
          },
        },
        emits: ['handle-delete-item'],
        methods: {
          handleDeleteItem(index) {
            this.$emit('handle-delete-item', index)
          },
        },
      })

      // mount è£…è½½åˆ°å“ªé‡Œï¼Œå³åœ¨ id = root çš„ html ä¸­ä½¿ç”¨ vue
      // vm å°±æ˜¯ vue åº”ç”¨çš„æ ¹ç»„ä»¶
      // mvvm æ¨¡å¼ï¼Œm model æ•°æ®ï¼Œ v view è§†å›¾ï¼Œvm viewModalè§†å›¾æ•°æ®è¿æ¥å±‚
      const vm = app.mount('#root')

      // æ”¹å˜æ•°æ®
      // vm.$data.item = 'æµ‹è¯•è¯¾ç¨‹'
      // vm.item = 'æµ‹è¯•è¯¾ç¨‹'
    </script>
  </body>
</html>
```





## ç”Ÿå‘½å‘¨æœŸå‡½æ•°

æ³¨æ„ Vue2 çš„ destroy ç­‰å·²è¢« unmount ç­‰å–ä»£

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hello World</title>
  </head>
  <body>
    <div id="root">
      <div>{{counter}}</div>
    </div>

    <script src="https://unpkg.com/vue@next"></script>
    <script>
      // ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼šåœ¨æŸä¸€åˆ»ä¼šè‡ªåŠ¨æ‰§è¡Œçš„å‡½æ•°
      // æ‰§è¡Œå®Œ Vue.createApp å¹¶ä¸” mount åå¼€å§‹è¿›è¡Œç”Ÿå‘½å‘¨æœŸå‡½æ•°

      let options = {
        data() {
          return {
            counter: 1,
          }
        },
        beforeCreate() {
          console.log(
            '=====[beforeCreate]: after init events & lifecycleã€‚äº‹ä»¶ç»‘å®šã€ç”Ÿå‘½å‘¨æœŸå‡½æ•°ç­‰ã€‚å³ Vue åº”ç”¨ç”Ÿæˆä¹‹å‰ï¼ŒVue.createApp',
            'ã€‚root innerHTML: ',
            document.getElementById('root').innerHTML // ç©º
          )
        },
        created() {
          console.log(
            '=====[created]: after init injections & reactivityã€‚ä¾èµ–æ³¨å…¥ã€å“åº”å¼ï¼ˆæ•°æ®åŒå‘ç»‘å®šï¼‰ç­‰ã€‚å³ Vue åº”ç”¨ç”Ÿæˆä¹‹åï¼ŒVue.createApp',
            'ã€‚root innerHTML: ',
            document.getElementById('root').innerHTML // ç©º
          )
        },
        // ç»„ä»¶ä¸­æœ‰ template åˆ™ç¼–è¯‘ä¸º render å‡½æ•°ï¼Œæ²¡æœ‰åˆ™ä½¿ç”¨ mount æŒ‚è½½çš„ el DOM å…ƒç´ ä½œä¸º template è¿›è¡Œç¼–è¯‘
        beforeMount() {
          console.log(
            '=====[beforeMount]: templateï¼ˆæˆ– elï¼‰ çš„ innerHtml è¢«ç¼–è¯‘æˆrenderå‡½æ•°åã€‚æˆ–ç§°ä¸ºç»„ä»¶è¢«æ¸²æŸ“åˆ°é¡µé¢å‰ã€‚app.mount()',
            'ã€‚root innerHTML: ',
            document.getElementById('root').innerHTML // ç©ºï¼Œæ­¤æ—¶æ²¡æœ‰ä»»ä½•å†…å®¹ï¼
          )
        },
        mounted() {
          console.log(
            '=====[mounted]: after Create app.$el and replace "el" with itã€‚ ç»„ä»¶è¢«æ¸²æŸ“åˆ°é¡µé¢åã€‚æ­¤æ—¶é¡µé¢çš„æ‰€æœ‰æ•°æ®éƒ½å¯ä»¥æ­£å¸¸å±•ç¤ºï¼ï¼ï¼app.mount()',
            'ã€‚root innerHTML: ',
            document.getElementById('root').innerHTML // <div>1</div>
          )
        },
        beforeUpdate() {
          // æ‰§è¡Œ vm.counter ++ æ”¹å˜äº† data ä¸­æ•°æ®å³å¯
          console.log(
            '=====[beforeUpdate]: when data change, before Virtual DOM re-rendered and patchã€‚å³ data å˜åŒ–ï¼Œä¸”é¡µé¢é‡æ–°æ¸²æŸ“å‰æ‰§è¡Œ',
            'ã€‚root innerHTML: ',
            document.getElementById('root').innerHTML // <div>1</div>
          )
        },
        updated() {
          // æ‰§è¡Œ vm.counter ++ æ”¹å˜äº† data ä¸­æ•°æ®å³å¯
          console.log(
            '=====[updated]: when data change, after Virtual DOM re-rendered and patchã€‚å³ data å˜åŒ–ï¼Œä¸”é¡µé¢é‡æ–°æ¸²æŸ“åæ‰§è¡Œ',
            'ã€‚root innerHTML: ',

            document.getElementById('root').innerHTML // <div>2</div>
          )
        },
        beforeUnmount() {
          console.log(
            '=====[beforeUnmount]: when app.unmount() is calledã€‚å³ Vue åº”ç”¨å¤±æ•ˆæ—¶ï¼Œç±»æ¯” beforeMount',
            'ã€‚root innerHTML: ',
            document.getElementById('root').innerHTML // <div>2</div>
          )
        },
        unmounted() {
          console.log(
            '=====[unmounted]: when app.unmount() is calledã€‚å³ Vue åº”ç”¨å¤±æ•ˆï¼Œä¸” DOM å®Œå…¨é”€æ¯ä¹‹åï¼Œç±»æ¯” mounted',
            'ã€‚root innerHTML: ',
            document.getElementById('root').innerHTML // ç©º
          )
        },
      }

      // Vue.createApp åˆ›å»º Vue åº”ç”¨
      // mount è£…è½½åˆ°å“ªé‡Œï¼Œå³åœ¨ id = root çš„ html ä¸­ä½¿ç”¨ vue
      const app = Vue.createApp(options)
      const vm = app.mount('#root')

      // vm.$data.counter = 2
      vm.counter = 2
      // app.unmount()
    </script>
  </body>
</html>

```

![å®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸ](../images/lifecycle.png)