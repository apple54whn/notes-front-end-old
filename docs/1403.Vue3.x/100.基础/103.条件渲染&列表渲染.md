---
title: æ¡ä»¶æ¸²æŸ“&åˆ—è¡¨æ¸²æŸ“
date: 2022-01-13 21:11:35
permalink: /pages/3dbba2/
categories:
  - x
  - åŸºç¡€
tags:
  - 
---



# æ¡ä»¶æ¸²æŸ“&åˆ—è¡¨æ¸²æŸ“

## v-if & v-show

*   v-showå°±æ˜¯ display: none
*   v-showä¸æ”¯æŒ template
*   v-showä¸èƒ½å’Œv-elseä¸€èµ·ä½¿ç”¨





## v-for

ä¹Ÿå¯ä»¥ç”¨ `of` æ›¿ä»£ `in` ä½œä¸ºåˆ†éš”ç¬¦ï¼Œå› ä¸ºå®ƒæ›´æŽ¥è¿‘ JavaScript è¿­ä»£å™¨çš„è¯­æ³•



### æ•°ç»„æ›´æ–°æ£€æµ‹ ðŸ”¥

*   push()ï¼šæ·»åŠ åˆ°æœ€åŽ

*   pop()ï¼šå¼¹å‡ºæœ€å‰é¢çš„
*   shift()ï¼šå¼¹å‡ºæœ€åŽé¢çš„
*   unshift()ï¼šæ·»åŠ åˆ°æœ€å‰é¢
*   splice()ï¼šå¢žåˆ æ”¹éƒ½å¯ä»¥
*   sort()ï¼šæŽ’åº
*   reverse()ï¼šåè½¬





### key çš„ä½œç”¨ ðŸ”¥

*   keyå±žæ€§ä¸»è¦ç”¨åœ¨Vueçš„**è™šæ‹ŸDOMç®—æ³•**ï¼Œåœ¨**æ–°æ—§nodeså¯¹æ¯”**æ—¶**è¾¨è¯†VNodes**
*   å¦‚æžœ**ä¸ä½¿ç”¨key**ï¼ŒVueä¼šä½¿ç”¨ä¸€ç§æœ€å¤§é™åº¦å‡å°‘åŠ¨æ€å…ƒç´ å¹¶ä¸”å°½å¯èƒ½çš„å°è¯•**å°±åœ°ä¿®æ”¹/å¤ç”¨**ç›¸åŒç±»åž‹å…ƒç´ çš„ç®—æ³•
*   è€Œ**ä½¿ç”¨key**æ—¶ï¼Œå®ƒä¼š**åŸºäºŽkeyçš„å˜åŒ–é‡æ–°æŽ’åˆ—å…ƒç´ é¡ºåº**ï¼Œå¹¶ä¸”ä¼š**ç§»é™¤/é”€æ¯keyä¸å­˜åœ¨çš„å…ƒç´ **





### VNode ðŸ”¥

å…¨ç§°æ˜¯**Virtual Node**ï¼Œå³**è™šæ‹ŸèŠ‚ç‚¹**

æ— è®ºç»„ä»¶è¿˜æ˜¯å…ƒç´ ï¼Œåœ¨Vueä¸­è¡¨ç¤ºå‡ºæ¥éƒ½æ˜¯ä¸€ä¸ªä¸ªVNodeã€‚æ˜¯ä¸€ä¸ªJavascriptå¯¹è±¡

![image-20220115194233000](../images/image-20220115194233000.png)



### è™šæ‹ŸDOM ðŸ”¥

å¦‚æžœé¡µé¢ä¸æ˜¯ä¸€ä¸ªç®€å•çš„å…ƒç´ ï¼ˆå¦‚divï¼‰ï¼Œè€Œæ˜¯**è®¸å¤šå…ƒç´ **ï¼Œé‚£ä¹ˆä»–ä»¬ä¼šå½¢æˆ**ä¸€ä¸ªä¸ªVNode**ï¼Œ**æ•´ä½“**ç§°ä½œè™šæ‹ŸDOM





### Vue æºç å¯¹äºŽ key çš„åˆ¤æ–­

åŸºäºŽv3.2.9ç‰ˆæœ¬

åœ¨`/vue-next/packages/runtime-core/src/renderer.ts`çš„1600è¡Œä¸­

![image-20220115200243775](../images/image-20220115200243775.png)





### æ²¡æœ‰ key æ—¶çš„ diff ç®—æ³• ðŸ”¥

![image-20220115201043149](../images/image-20220115201043149.png)

ä¸Šé¢çš„diffç®—æ³•æ•ˆçŽ‡å¹¶ä¸é«˜ï¼š

*    **cå’Œd**æ¥è¯´å®ƒä»¬äº‹å®žä¸Š**å¹¶ä¸éœ€è¦æœ‰ä»»ä½•çš„æ”¹åŠ¨**
*   ä½†æ˜¯å› ä¸ºæˆ‘ä»¬çš„cè¢«fæ‰€ä½¿ç”¨äº†ï¼Œæ‰€æœ‰åŽç»­æ‰€æœ‰çš„å†…å®¹éƒ½è¦ä¸€æ¬¡è¿›è¡Œæ”¹åŠ¨ï¼Œå¹¶ä¸”æœ€åŽè¿›è¡Œæ–°å¢ž

![image-20220115201327030](../images/image-20220115201327030.png)



### æœ‰ key æ—¶çš„ diff ç®—æ³• ðŸ”¥

![image-20220115203949402](../images/image-20220115203949402.png)

1.   ç¬¬ä¸€æ­¥çš„æ“ä½œæ˜¯ä»Žå¤´å¼€å§‹è¿›è¡ŒéåŽ†ã€æ¯”è¾ƒ

     1.   aå’Œbæ˜¯ä¸€è‡´çš„ä¼šç»§ç»­è¿›è¡Œæ¯”è¾ƒ;
     2.   cå’Œfå› ä¸ºkeyä¸ä¸€è‡´ï¼Œæ‰€ä»¥å°±ä¼šbreakè·³å‡ºå¾ªçŽ¯;

     ![image-20220115204045429](../images/image-20220115204045429.png)

2.   ç¬¬äºŒæ­¥çš„æ“ä½œæ˜¯ä»Žå°¾éƒ¨å¼€å§‹è¿›è¡ŒéåŽ†ã€æ¯”è¾ƒ:

     ![image-20220115204111711](../images/image-20220115204111711.png)

3.   ç¬¬ä¸‰æ­¥æ˜¯å¦‚æžœæ—§èŠ‚ç‚¹éåŽ†å®Œæ¯•ï¼Œä½†æ˜¯ä¾ç„¶æœ‰æ–°çš„èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå°±æ–°å¢žèŠ‚ç‚¹ï¼ˆ`i>e1 && i<=e2`)

     ![image-20220115204134677](../images/image-20220115204134677.png)

4.   ç¬¬å››æ­¥æ˜¯å¦‚æžœæ–°çš„èŠ‚ç‚¹éåŽ†å®Œæ¯•ï¼Œä½†æ˜¯ä¾ç„¶æœ‰æ—§çš„èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå°±ç§»é™¤æ—§èŠ‚ç‚¹

     ![image-20220115204155514](../images/image-20220115204155514.png)

5.   ç¬¬äº”æ­¥æ˜¯æœ€ç‰¹è‰²çš„æƒ…å†µï¼Œä¸­é—´è¿˜æœ‰å¾ˆå¤šæœªçŸ¥çš„æˆ–è€…ä¹±åºçš„èŠ‚ç‚¹

     ![image-20220115204213689](../images/image-20220115204213689.png)

     å¯ä»¥å‘çŽ°ï¼ŒVueåœ¨è¿›è¡Œdiffç®—æ³•çš„æ—¶å€™ï¼Œä¼šå°½é‡åˆ©ç”¨æˆ‘ä»¬çš„keyæ¥è¿›è¡Œä¼˜åŒ–æ“ä½œï¼š

     *   åœ¨æ²¡æœ‰keyçš„æ—¶å€™æˆ‘ä»¬çš„æ•ˆçŽ‡æ˜¯éžå¸¸ä½Žæ•ˆçš„;
     *   åœ¨è¿›è¡Œæ’å…¥æˆ–è€…é‡ç½®é¡ºåºçš„æ—¶å€™ï¼Œä¿æŒç›¸åŒçš„keyå¯ä»¥è®©diffç®—æ³•æ›´åŠ çš„é«˜æ•ˆ;
